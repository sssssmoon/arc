<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ARK Full Site</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
/* Custom Styles */
.standard-btn {
    @apply px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700;
}
.profile-section { margin-bottom: 2rem; }
.profile-sidebar-item.active { font-weight: bold; color: #5B21B6; }
.dropdown-menu { display: none; position: absolute; background: white; min-width: 150px; z-index: 50; border: 1px solid #ccc; border-radius: 0.25rem; }
.group:hover .dropdown-menu { display: block; }
.mobile-dropdown { display: none; }
.auth-modal, .search-modal, .notification-modal, .chat-modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); justify-content: center; align-items: center; z-index: 50; }
.auth-content, .search-content, .notification-content, .chat-content { background: white; padding: 1rem; border-radius: 0.5rem; width: 95%; max-width: 600px; }
.error-message { color: red; font-size: 0.8rem; }
.info-message, .password-requirements { font-size: 0.75rem; color: gray; }
</style>
</head>
<body class="bg-gray-50 text-gray-900">

<!-- HEADER -->
<header class="header-bg flex items-center justify-between p-2 relative bg-purple-800 text-white">
    <div class="text-4xl font-serif font-bold pl-4">ARK</div>
    <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">☰</button>
    <div class="flex items-center space-x-4 pr-4 text-sm font-semibold">
        <div id="notificationBell" class="notification-bell hidden" onclick="openNotificationModal()">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg>
        </div>
        <div class="account-dropdown">
            <a href="#" id="accountLink" class="hover:underline" onclick="showProfilePage(event)">*Account*</a>
            <div class="account-dropdown-menu">
                <a href="#" onclick="showSettingsPage(event)">Settings</a>
                <a href="#" onclick="showCertificatesPage(event)">Certificates</a>
                <a href="#" onclick="showAchievementsPage(event)">Achievements</a>
                <a href="#" onclick="showHistoryPage(event)">My history</a>
            </div>
        </div>
        <a href="#" onclick="showPostPage(event)">Post</a>
        <a href="#" id="authLink" onclick="handleAuthClick()">Log in</a>
        <input type="text" id="headerSearchInput" class="w-24 p-1 text-xs bg-white border border-gray-400" placeholder="" onkeyup="handleHeaderSearch(event)">
        <button class="bg-gray-300 px-2 py-1 text-xs font-bold border border-gray-500 hover:bg-gray-400" onclick="openSearchModal()">Search</button>
    </div>
</header>

<div class="light-purple-bar h-1 bg-purple-200"></div>

<!-- NAVIGATION -->
<nav class="flex text-sm relative bg-white">
    <a href="#" class="nav-link nav-active px-2 py-1" onclick="showHomePage(event)">Home</a>
    <div class="relative group px-2 py-1">
        <div id="browse-link" class="flex items-center cursor-pointer">
            Browse
            <svg class="ml-1 w-3 h-3 transition-transform duration-200 group-hover:rotate-180" fill="currentColor" viewBox="0 0 20 20"><path d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" fill-rule="evenodd"></path></svg>
        </div>
        <div class="dropdown-menu absolute top-full left-0 mt-1 shadow-lg rounded">
            <a href="#" onclick="showPublicPostsPage(event)" class="block px-2 py-1 hover:bg-gray-100">Public Posts</a>
            <a href="#" onclick="showBlogsPage(event)" class="block px-2 py-1 hover:bg-gray-100">Blogs</a>
            <a href="#" onclick="showIndexPage(event)" class="block px-2 py-1 hover:bg-gray-100">Index</a>
            <a href="#" onclick="showClustersPage(event)" class="block px-2 py-1 hover:bg-gray-100">Clusters</a>
        </div>
    </div>
    <div class="relative group px-2 py-1">
        <div id="about-link" class="flex items-center cursor-pointer">
            About
            <svg class="ml-1 w-3 h-3 transition-transform duration-200 group-hover:rotate-180" fill="currentColor" viewBox="0 0 20 20"><path d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" fill-rule="evenodd"></path></svg>
        </div>
        <div class="dropdown-menu absolute top-full left-0 mt-1 shadow-lg rounded">
            <a href="#" onclick="showVisionPage(event)" class="block px-2 py-1 hover:bg-gray-100">Our vision and mission</a>
            <a href="#" onclick="showContactPage(event)" class="block px-2 py-1 hover:bg-gray-100">Contact us</a>
            <a href="#" onclick="showFAQPage(event)" class="block px-2 py-1 hover:bg-gray-100">FAQs</a>
            <a href="#" onclick="showVolunteerPage(event)" class="block px-2 py-1 hover:bg-gray-100">Volunteer</a>
        </div>
    </div>
</nav>

<!-- MOBILE MENU -->
<div id="mobileMenu" class="mobile-menu hidden fixed inset-0 bg-black bg-opacity-50 z-50">
    <div class="mobile-menu-content bg-white p-4 w-72 h-full overflow-y-auto">
        <button class="mobile-menu-close text-xl mb-4" onclick="toggleMobileMenu()">&times;</button>
        <a href="#" class="block mb-2" onclick="showHomePage(event); toggleMobileMenu();">Home</a>
        <div class="mb-2 cursor-pointer" onclick="toggleMobileDropdown('browseDropdown')">Browse ▼</div>
        <div id="browseDropdown" class="mobile-dropdown pl-2">
            <a href="#" class="block mb-1" onclick="showPublicPostsPage(event); toggleMobileMenu();">Public Posts</a>
            <a href="#" class="block mb-1" onclick="showBlogsPage(event); toggleMobileMenu();">Blogs</a>
            <a href="#" class="block mb-1" onclick="showIndexPage(event); toggleMobileMenu();">Index</a>
        </div>
        <div class="mb-2 cursor-pointer" onclick="toggleMobileDropdown('aboutDropdown')">About ▼</div>
        <div id="aboutDropdown" class="mobile-dropdown pl-2">
            <a href="#" class="block mb-1" onclick="showVisionPage(event); toggleMobileMenu();">Vision</a>
            <a href="#" class="block mb-1" onclick="showContactPage(event); toggleMobileMenu();">Contact</a>
        </div>
        <a href="#" id="mobileAuthLink" onclick="handleAuthClick(); toggleMobileMenu();">Log in</a>
    </div>
</div>

<!-- AUTH MODAL -->
<div id="authModal" class="auth-modal flex items-center justify-center">
    <div class="auth-content">
        <span class="close-modal text-xl cursor-pointer" onclick="closeAuthModal()">&times;</span>
        <div class="auth-tabs flex space-x-2 mb-4">
            <div id="loginTab" class="auth-tab cursor-pointer border-b-2 border-purple-600" onclick="switchTab('login')">Login</div>
            <div id="registerTab" class="auth-tab cursor-pointer" onclick="switchTab('register')">Register</div>
        </div>
        <div id="loginContent">
            <input type="text" id="loginUsername" placeholder="Username or Email" class="border p-2 w-full mb-2">
            <input type="password" id="loginPassword" placeholder="Password" class="border p-2 w-full mb-2">
            <div id="loginError" class="text-red-500 text-sm"></div>
            <button onclick="performLogin()" class="standard-btn w-full">Login</button>
        </div>
        <div id="registerContent" class="hidden">
            <input type="text" id="registerUsername" placeholder="Username" class="border p-2 w-full mb-2">
            <input type="email" id="registerEmail" placeholder="Email" class="border p-2 w-full mb-2">
            <input type="password" id="registerPassword" placeholder="Password" class="border p-2 w-full mb-2">
            <input type="password" id="confirmPassword" placeholder="Confirm Password" class="border p-2 w-full mb-2">
            <div id="registerError" class="text-red-500 text-sm mb-2"></div>
            <button onclick="performRegister()" class="standard-btn w-full">Register</button>
        </div>
    </div>
</div>

<!-- SEARCH MODAL -->
<div id="searchModal" class="search-modal flex items-center justify-center">
    <div class="search-content">
        <span class="close-modal text-xl cursor-pointer" onclick="closeSearchModal()">&times;</span>
        <h2 class="text-xl font-bold mb-2">Search</h2>
        <input type="text" id="searchInput" placeholder="Search..." class="border p-2 w-full mb-2" onkeyup="performSearch(event)">
        <div id="searchResults" class="text-sm"></div>
    </div>
</div>

<!-- NOTIFICATION MODAL -->
<div id="notificationModal" class="notification-modal flex items-center justify-center">
    <div class="notification-content">
        <span class="close-modal text-xl cursor-pointer" onclick="closeNotificationModal()">&times;</span>
        <h2 class="text-xl font-bold mb-2">Notifications</h2>
        <div id="notificationList"></div>
    </div>
</div>

<!-- CHAT MODAL -->
<div id="chatModal" class="chat-modal flex items-center justify-center">
    <div class="chat-content">
        <span class="close-modal text-xl cursor-pointer" onclick="closeChatModal()">&times;</span>
        <div id="chatMessages" class="mb-2 max-h-64 overflow-y-auto"></div>
        <input type="text" id="chatInput" placeholder="Type a message..." class="border p-2 w-full mb-2" onkeyup="handleChatInput(event)">
        <button onclick="sendMessage()" class="standard-btn w-full">Send</button>
    </div>
</div>

<!-- MAIN CONTENT WRAPPER -->
<div class="content-wrapper p-4">

<!-- HOME PAGE CONTENT -->
<div id="homePage" class="page active">
    <!-- Paste your full Home content here (News, LFB, Discover section etc) -->
</div>

<!-- PUBLIC POSTS PAGE -->
<div id="publicPostsPage" class="page hidden">
    <h2 class="text-2xl font-bold mb-6 text-purple-800">Public Posts</h2>
    <div id="publicPostsList"></div>
</div>

<!-- OTHER USER PROFILE PAGE -->
<div id="otherUserProfilePage" class="page hidden">
    <div class="grid grid-cols-1 lg:grid-cols-4 gap-0">
        <div class="lg:col-span-1 pr-6 border-r border-dashed border-gray-400">
            <div class="profile-sidebar">
                <h3 class="font-bold mb-4">Profile</h3>
                <div class="profile-sidebar-item active" data-section="profile">Profile</div>
                <div class="profile-sidebar-item" data-section="posts">Posts</div>
                <div class="profile-sidebar-item" data-section="blogs">Blogs</div>
            </div>
        </div>
        <div class="lg:col-span-3 pl-6">
            <div id="otherProfileSection" class="profile-section">
                <h2 class="text-2xl font-bold mb-6 text-purple-800">User Profile</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <img id="otherProfilePictureDisplay" src="https://z-cdn-media.chatglm.cn/files/958d52f5-1e66-4d41-adaa-8fae417937e6_octupus%20logo.png" class="profile-picture mb-4">
                        <p id="otherProfileUsername" class="mb-2">Username</p>
                        <p id="otherProfilePronouns">(pronouns/here)</p>
                    </div>
                    <div>
                        <p id="otherProfileBiography" class="mb-2">This is where you can write about yourself...</p>
                        <p id="otherProfileAspirations" class="mb-4">Aspirations here...</p>
                        <button id="followButton" class="standard-btn w-full">Follow</button>
                    </div>
                </div>
            </div>
            <div id="otherPostsSection" class="profile-section hidden">
                <h2 class="text-2xl font-bold mb-2">Posts</h2>
                <div id="otherUserPosts"></div>
            </div>
            <div id="otherBlogsSection" class="profile-section hidden">
                <h2 class="text-2xl font-bold mb-2">Blogs</h2>
                <div id="otherUserBlogs"></div>
            </div>
        </div>
    </div>
</div>

</div> <!-- END CONTENT WRAPPER -->

<!-- JAVASCRIPT FIXES -->
<script>
document.addEventListener('DOMContentLoaded', () => {
    // Follow button toggle
    const followButton = document.getElementById('followButton');
    followButton?.addEventListener('click', () => {
        if(followButton.textContent === 'Follow'){
            followButton.textContent = 'Following';
            followButton.classList.add('bg-green-500', 'text-white');
        } else {
            followButton.textContent = 'Follow';
            followButton.classList.remove('bg-green-500', 'text-white');
        }
    });

    // Profile sidebar tab switch
    const sidebarItems = document.querySelectorAll('.profile-sidebar-item');
    sidebarItems.forEach(item => {
        item.addEventListener('click', () => {
            const section = item.dataset.section;
            ['otherProfileSection','otherPostsSection','otherBlogsSection'].forEach(id => {
                document.getElementById(id).classList.add('hidden');
            });
            document.getElementById(`other${section.charAt(0).toUpperCase()+section.slice(1)}Section`).classList.remove('hidden');
            sidebarItems.forEach(i => i.classList.remove('active'));
            item.classList.add('active');
        });
    });
});

// Mobile menu toggle
function toggleMobileMenu(){
    document.getElementById('mobileMenu').classList.toggle('hidden');
}

// Mobile dropdowns
function toggleMobileDropdown(id){
    document.getElementById(id).classList.toggle('hidden');
}

// Auth modal tabs
function switchTab(tab){
    document.getElementById('loginContent').classList.toggle('hidden', tab!=='login');
    document.getElementById('registerContent').classList.toggle('hidden', tab!=='register');
    document.getElementById('loginTab').classList.toggle('border-b-2', tab==='login');
    document.getElementById('registerTab').classList.toggle('border-b-2', tab==='register');
}

// Modal open/close
function handleAuthClick(){document.getElementById('authModal').style.display='flex';}
function closeAuthModal(){document.getElementById('authModal').style.display='none';}
function openSearchModal(){document.getElementById('searchModal').style.display='flex';}
function closeSearchModal(){document.getElementById('searchModal').style.display='none';}
function openNotificationModal(){document.getElementById('notificationModal').style.display='flex';}
function closeNotificationModal(){document.getElementById('notificationModal').style.display='none';}
function closeChatModal(){document.getElementById('chatModal').style.display='none';}
function sendMessage(){console.log('Send message placeholder');}
</script>

</body>
</html>
