<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARK - A Classic Neocities Site</title>
    <!-- Add favicon -->
    <link rel="icon" href="https://z-cdn-media.chatglm.cn/files/958d52f5-1e66-4d41-adaa-8fae417937e6_octupus%20logo.png?auth_key=1793282742-e95e96f3c2434de38fe756e55c0425ca-0-98a496c4a876d4e28fdc80a9a2d5e15a" type="image/png">
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /*
        Colors and fonts carefully selected to match the "ARK" site aesthetic:
        - Primary Purple: #6B4991 (Header/Navigation)
        - Secondary Purple/Lavender: #C2A8D9 (Hover/Dropdown/Content Background)
        - Main Background: #F2F2F7 (Very light lavender)
        - Font: Serif for a classic, academic document look
        */

        :root {
            --color-primary: #6B4991;
            --color-secondary: #C2A8D9;
            --color-bg-main: #F2F2F7;
            --color-text-dark: #333333;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            width: 100%;
        }

        body {
            background-color: var(--color-bg-main);
            font-family: Georgia, 'Times New Roman', Times, serif;
            color: var(--color-text-dark);
            font-size: 14px;
            display: flex;
            flex-direction: column;
        }

        .header-bg {
            background-color: var(--color-primary);
        }

        .light-purple-bar {
            background-color: var(--color-secondary);
            height: 8.4px;
        }

        .nav-link {
            padding: 8px 20px;
            background-color: var(--color-primary);
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.1s;
            font-size: 14px;
        }

        .nav-link:hover, .nav-active {
            background-color: var(--color-secondary);
            color: black;
        }

        .dotted-border-h {
            border-top: 1px dotted var(--color-text-dark);
            height: 1px;
            margin: 10px 0;
        }

        .content-panel {
            background-color: white;
            padding: 1rem;
        }

        .dropdown-menu {
            position: absolute;
            background-color: var(--color-secondary);
            border: 1px solid var(--color-primary);
            z-index: 10;
            min-width: 150px;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
            display: none;
        }
        .dropdown-menu a {
            display: block;
            padding: 6px 10px;
            color: var(--color-text-dark);
            font-family: Georgia, 'Times New Roman', Times, serif;
            font-size: 14px;
        }
        .dropdown-menu a:hover {
            background-color: #E0E0E6;
        }

        /* Account Dropdown Styles */
        .account-dropdown {
            position: relative;
        }

        .account-dropdown-menu {
            position: absolute;
            right: 0;
            background-color: var(--color-secondary);
            border: 1px solid var(--color-primary);
            z-index: 10;
            min-width: 150px;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
            display: none;
            padding: 8px 0;
        }

        .account-dropdown:hover .account-dropdown-menu {
            display: block;
        }

        .account-dropdown-menu a {
            display: block;
            padding: 12px 16px;
            color: var(--color-text-dark);
            margin: 4px 8px;
            border-radius: 4px;
            transition: background-color 0.2s;
            font-family: Georgia, 'Times New Roman', Times, serif;
            font-size: 14px;
            font-weight: normal;
        }

        .account-dropdown-menu a:hover {
            background-color: #E0E0E6;
        }

        /* Profile Page Styles - Horizontal Layout */
        .profile-sidebar {
            background-color: var(--color-secondary);
            padding: 0.5rem;
            height: 100%;
        }

        .profile-sidebar-item {
            padding: 8px 12px;
            margin-bottom: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
            font-size: 14px;
        }

        .profile-sidebar-item:hover {
            background-color: #E0E0E6;
        }

        .profile-sidebar-item.active {
            background-color: #B395D0;
            font-weight: bold;
        }

        .profile-content {
            background-color: white;
            padding: 1rem;
            border-radius: 0 0 8px 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .profile-picture {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--color-primary);
        }

        /* Edit Profile Styles */
        .edit-input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-family: Georgia, 'Times New Roman', Times, serif;
            margin-bottom: 12px;
            font-size: 14px;
        }

        .edit-textarea {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-family: Georgia, 'Times New Roman', Times, serif;
            min-height: 100px;
            margin-bottom: 12px;
            resize: vertical;
            font-size: 14px;
        }

        .edit-buttons {
            display: flex;
            gap: 10px;
            margin-top: 16px;
        }

        /* Auth Modal Styles */
        .auth-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }

        .auth-content {
            background-color: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 400px;
            border: 2px solid var(--color-primary);
        }

        .auth-title {
            color: var(--color-primary);
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 1rem;
            text-align: center;
        }

        .auth-input {
            width: 100%;
            padding: 0.5rem;
            margin-bottom: 1rem;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
        }

        .auth-button {
            background-color: var(--color-primary);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            width: 100%;
            transition: background-color 0.2s;
            font-size: 14px;
        }

        .auth-button:hover {
            background-color: var(--color-secondary);
            color: black;
        }

        .close-modal {
            float: right;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--color-primary);
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 1rem;
            border-bottom: 1px solid var(--color-primary);
        }

        .auth-tab {
            flex: 1;
            padding: 0.5rem;
            text-align: center;
            cursor: pointer;
            color: var(--color-primary);
            font-weight: bold;
            font-size: 14px;
        }

        .auth-tab.active {
            background-color: var(--color-secondary);
        }

        .auth-tab-content {
            display: none;
        }

        .auth-tab-content.active {
            display: block;
        }

        .error-message {
            color: #d32f2f;
            font-size: 0.8rem;
            margin-top: -0.5rem;
            margin-bottom: 0.5rem;
        }

        .password-requirements {
            font-size: 0.7rem;
            color: #666;
            margin-top: -0.5rem;
            margin-bottom: 0.5rem;
        }

        .info-message {
            color: #1976d2;
            font-size: 0.7rem;
            margin-top: -0.5rem;
            margin-bottom: 0.5rem;
            font-style: italic;
        }

        /* Page visibility */
        .page {
            display: none;
            flex: 1;
            width: 100%;
        }

        .page.active {
            display: block;
        }

        /* Profile Picture Change Button */
        .change-pfp-btn {
            background-color: var(--color-primary);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            font-size: 14px;
            transition: background-color 0.2s;
            margin-top: 8px;
        }

        .change-pfp-btn:hover {
            background-color: var(--color-secondary);
            color: black;
        }

        /* Standard button style to match Post and Log out buttons */
        .standard-btn {
            background-color: var(--color-primary);
            color: white;
            border: none;
            padding: 8px 20px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.1s;
            font-size: 14px;
            border-radius: 0;
        }

        .standard-btn:hover {
            background-color: var(--color-secondary);
            color: black;
        }

        /* Conversations section styling */
        .conversations-container {
            background-color: white;
            padding: 1rem;
            border-radius: 0 0 8px 8px;
        }

        .conversation-item {
            border-bottom: 1px solid #eee;
            padding: 1rem 0;
        }

        .conversation-item:last-child {
            border-bottom: none;
        }

        .conversation-username {
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .conversation-content {
            margin-bottom: 0.5rem;
        }

        .conversation-meta {
            font-size: 0.8rem;
            color: #666;
            text-align: right;
        }

        /* New post section styling */
        .new-post-container {
            background-color: white;
            padding: 1rem;
            border-radius: 0 0 8px 8px;
        }

        .post-input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-family: Georgia, 'Times New Roman', Times, serif;
            margin-bottom: 12px;
            font-size: 14px;
            min-height: 100px;
            resize: vertical;
        }

        /* Dashboard section styling */
        .dashboard-container {
            background-color: white;
            padding: 1rem;
            border-radius: 0 0 8px 8px;
        }

        .post-preview {
            border: 1px solid #eee;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .post-title {
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .post-meta {
            font-size: 0.8rem;
            color: #666;
            margin-bottom: 0.5rem;
        }

        .post-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 0.5rem;
        }

        /* Search Modal Styles */
        .search-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }

        .search-content {
            background-color: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            border: 2px solid var(--color-primary);
        }

        .search-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .search-title {
            color: var(--color-primary);
            font-size: 1.5rem;
            font-weight: bold;
        }

        .search-filters {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .search-filter {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .search-input {
            width: 100%;
            padding: 0.5rem;
            margin-bottom: 1rem;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
        }

        .search-results {
            margin-top: 1rem;
        }

        .search-result-item {
            border: 1px solid #eee;
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .search-result-item:hover {
            background-color: #f5f5f5;
        }

        .search-result-title {
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: var(--color-primary);
        }

        .search-result-type {
            font-size: 0.8rem;
            color: #666;
            margin-bottom: 0.5rem;
        }

        .search-result-content {
            margin-bottom: 0.5rem;
        }

        .search-result-meta {
            font-size: 0.8rem;
            color: #666;
        }

        /* Full screen layout styles */
        .main-container {
            width: 100%;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .content-wrapper {
            flex: 1;
            width: 100%;
            background-color: white;
        }

        /* Notification Bell Styles */
        .notification-bell {
            position: relative;
            cursor: pointer;
            margin-right: 10px;
        }

        .notification-bell svg {
            width: 20px;
            height: 20px;
            fill: white;
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: red;
            color: white;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 10px;
            font-weight: bold;
        }

        /* Notification Modal Styles */
        .notification-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }

        .notification-content {
            background-color: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            border: 2px solid var(--color-primary);
        }

        .notification-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .notification-title {
            color: var(--color-primary);
            font-size: 1.5rem;
            font-weight: bold;
        }

        .notification-item {
            border-bottom: 1px solid #eee;
            padding: 1rem 0;
        }

        .notification-item:last-child {
            border-bottom: none;
        }

        .notification-item.unread {
            background-color: #f0f8ff;
        }

        .notification-text {
            margin-bottom: 0.5rem;
        }

        .notification-time {
            font-size: 0.8rem;
            color: #666;
        }

        .notification-actions {
            display: flex;
            gap: 10px;
            margin-top: 0.5rem;
        }

        /* Chat Modal Styles */
        .chat-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }

        .chat-content {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 600px;
            height: 80vh;
            display: flex;
            flex-direction: column;
            border: 2px solid var(--color-primary);
        }

        .chat-header {
            background-color: var(--color-primary);
            color: white;
            padding: 1rem;
            border-radius: 6px 6px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-messages {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
        }

        .chat-input-container {
            padding: 1rem;
            border-top: 1px solid #eee;
            display: flex;
            gap: 10px;
        }

        .chat-input {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-family: Georgia, 'Times New Roman', Times, serif;
            font-size: 14px;
        }

        .chat-send-btn {
            background-color: var(--color-primary);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.2s;
        }

        .chat-send-btn:hover {
            background-color: var(--color-secondary);
            color: black;
        }

        .message {
            margin-bottom: 1rem;
            display: flex;
            flex-direction: column;
        }

        .message.sent {
            align-items: flex-end;
        }

        .message.received {
            align-items: flex-start;
        }

        .message-bubble {
            max-width: 70%;
            padding: 8px 12px;
            border-radius: 8px;
        }

        .message.sent .message-bubble {
            background-color: var(--color-primary);
            color: white;
        }

        .message.received .message-bubble {
            background-color: #f0f0f0;
            color: black;
        }

        .message-time {
            font-size: 0.7rem;
            color: #666;
            margin-top: 4px;
        }

        /* Public Posts Section */
        .public-posts-container {
            background-color: white;
            padding: 1rem;
        }

        .public-post-item {
            border-bottom: 1px solid #eee;
            padding: 1rem 0;
        }

        .public-post-item:last-child {
            border-bottom: none;
        }

        .public-post-header {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .public-post-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 10px;
            border: 2px solid var(--color-primary);
        }

        .public-post-info {
            flex: 1;
        }

        .public-post-username {
            font-weight: bold;
            color: var(--color-primary);
            cursor: pointer;
        }

        .public-post-date {
            font-size: 0.8rem;
            color: #666;
        }

        .public-post-title {
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .public-post-content {
            margin-bottom: 0.5rem;
        }

        .public-post-actions {
            display: flex;
            gap: 10px;
            margin-top: 0.5rem;
        }

        .public-post-action {
            font-size: 0.8rem;
            color: #666;
            cursor: pointer;
        }

        .public-post-action:hover {
            color: var(--color-primary);
        }

        /* Mobile Menu Styles */
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
        }

        .mobile-menu {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 200;
            overflow-y: auto;
        }

        .mobile-menu-content {
            background-color: var(--color-primary);
            width: 80%;
            max-width: 300px;
            height: 100%;
            padding: 20px;
            overflow-y: auto;
        }

        .mobile-menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--color-secondary);
        }

        .mobile-menu-title {
            color: white;
            font-size: 24px;
            font-weight: bold;
        }

        .mobile-menu-close {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }

        .mobile-nav-link {
            display: block;
            padding: 12px 0;
            color: white;
            font-weight: bold;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            text-decoration: none;
        }

        .mobile-nav-link:hover {
            background-color: var(--color-secondary);
            color: black;
        }

        .mobile-nav-link.active {
            background-color: var(--color-secondary);
            color: black;
        }

        .mobile-dropdown {
            margin-left: 20px;
        }

        .mobile-dropdown-link {
            display: block;
            padding: 8px 0;
            color: white;
            font-size: 14px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            text-decoration: none;
        }

        .mobile-dropdown-link:hover {
            background-color: var(--color-secondary);
            color: black;
        }

        .mobile-account-section {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--color-secondary);
        }

        .mobile-account-link {
            display: block;
            padding: 8px 0;
            color: white;
            font-size: 14px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            text-decoration: none;
        }

        .mobile-account-link:hover {
            background-color: var(--color-secondary);
            color: black;
        }

        /* Responsive adjustments */
        @media (max-width: 1024px) {
            .profile-info-grid {
                grid-template-columns: 1fr;
            }
            
            .profile-picture {
                width: 100px;
                height: 100px;
            }
        }

        @media (max-width: 768px) {
            /* Header adjustments */
            .header-bg {
                flex-wrap: wrap;
                padding: 8px;
            }
            
            .header-bg .text-4xl {
                font-size: 28px;
            }
            
            .header-bg .flex.items-center.space-x-4 {
                width: 100%;
                justify-content: space-between;
                margin-top: 8px;
            }
            
            .header-bg .flex.items-center.space-x-4 .flex.items-center {
                order: 2;
            }
            
            .header-bg .flex.items-center.space-x-4 img {
                order: 1;
                width: 80px;
                height: auto;
            }
            
            /* Mobile menu toggle */
            .mobile-menu-toggle {
                display: block;
                order: 3;
            }
            
            /* Hide desktop navigation on mobile */
            nav {
                display: none;
            }
            
            /* Content adjustments */
            .grid.grid-cols-1.lg\\:grid-cols-3 {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .grid.grid-cols-1.lg\\:grid-cols-4 {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .pr-6, .pl-6 {
                padding-right: 1rem;
                padding-left: 1rem;
            }
            
            .border-r {
                border-right: none;
                border-bottom: 1px dotted var(--color-text-dark);
                padding-bottom: 1rem;
                margin-bottom: 1rem;
            }
            
            /* Profile sidebar adjustments */
            .profile-sidebar {
                display: flex;
                flex-wrap: wrap;
                padding: 0.5rem;
                margin-bottom: 1rem;
            }
            
            .profile-sidebar-item {
                flex: 1 0 50%;
                padding: 8px;
                margin-bottom: 5px;
                text-align: center;
            }
            
            /* Modal adjustments */
            .auth-content, .search-content, .notification-content, .chat-content {
                width: 95%;
                padding: 1.5rem;
            }
            
            .chat-content {
                height: 90vh;
            }
            
            /* Button adjustments */
            .standard-btn {
                padding: 10px 15px;
                font-size: 16px;
                margin-bottom: 10px;
            }
            
            .edit-buttons {
                flex-direction: column;
            }
            
            /* Form adjustments */
            .edit-input, .edit-textarea, .post-input {
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            /* Search adjustments */
            .search-filters {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            /* Public posts adjustments */
            .public-post-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .public-post-avatar {
                margin-bottom: 10px;
            }
            
            /* Post actions adjustments */
            .post-actions {
                flex-direction: column;
                gap: 10px;
            }
            
            /* Grid adjustments */
            .grid.grid-cols-1.md\\:grid-cols-2.lg\\:grid-cols-3 {
                grid-template-columns: 1fr;
            }
            
            .grid.grid-cols-1.md\\:grid-cols-2 {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            /* Header adjustments for very small screens */
            .header-bg .text-4xl {
                font-size: 24px;
            }
            
            .header-bg .flex.items-center.space-x-4 img {
                width: 60px;
            }
            
            /* Content adjustments */
            .p-4.pt-6 {
                padding: 1rem 0.5rem;
            }
            
            /* Profile picture adjustments */
            .profile-picture {
                width: 80px;
                height: 80px;
            }
            
            /* Modal adjustments */
            .auth-content, .search-content, .notification-content {
                width: 98%;
                padding: 1rem;
            }
            
            /* Font size adjustments */
            body {
                font-size: 13px;
            }
            
            h2 {
                font-size: 1.5rem;
            }
            
            h3 {
                font-size: 1.2rem;
            }
        }

        /* Tablet specific adjustments */
        @media (min-width: 769px) and (max-width: 1024px) {
            /* Two column layout for tablets */
            .grid.grid-cols-1.lg\\:grid-cols-3 {
                grid-template-columns: 1fr 1fr;
            }
            
            .grid.grid-cols-1.lg\\:grid-cols-4 {
                grid-template-columns: 1fr 3fr;
            }
            
            /* Profile sidebar adjustments */
            .profile-sidebar-item {
                padding: 10px 12px;
            }
            
            /* Modal adjustments */
            .auth-content, .search-content, .notification-content {
                width: 85%;
            }
        }
    </style>
</head>
<body>

    <!-- Mobile Menu -->
    <div id="mobileMenu" class="mobile-menu">
        <div class="mobile-menu-content">
            <div class="mobile-menu-header">
                <div class="mobile-menu-title">ARK</div>
                <button class="mobile-menu-close" onclick="toggleMobileMenu()">&times;</button>
            </div>
            
            <a href="#" class="mobile-nav-link" onclick="showHomePage(event); toggleMobileMenu();">Home</a>
            
            <div class="mobile-nav-link" onclick="toggleMobileDropdown('browseDropdown')">
                Browse
                <svg class="inline-block ml-1 w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" fill-rule="evenodd"></path>
                </svg>
            </div>
            <div id="browseDropdown" class="mobile-dropdown" style="display: none;">
                <a href="#" class="mobile-dropdown-link" onclick="showPublicPostsPage(event); toggleMobileMenu();">Public Posts</a>
                <a href="#" class="mobile-dropdown-link" onclick="showBlogsPage(event); toggleMobileMenu();">Blogs</a>
                <a href="#" class="mobile-dropdown-link" onclick="showIndexPage(event); toggleMobileMenu();">Index</a>
                <a href="#" class="mobile-dropdown-link" onclick="showClustersPage(event); toggleMobileMenu();">Clusters</a>
            </div>
            
            <div class="mobile-nav-link" onclick="toggleMobileDropdown('aboutDropdown')">
                About
                <svg class="inline-block ml-1 w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" fill-rule="evenodd"></path>
                </svg>
            </div>
            <div id="aboutDropdown" class="mobile-dropdown" style="display: none;">
                <a href="#" class="mobile-dropdown-link" onclick="showVisionPage(event); toggleMobileMenu();">Our vision and mission</a>
                <a href="#" class="mobile-dropdown-link" onclick="showContactPage(event); toggleMobileMenu();">Contact us</a>
                <a href="#" class="mobile-dropdown-link" onclick="showFAQPage(event); toggleMobileMenu();">FAQs</a>
                <a href="#" class="mobile-dropdown-link" onclick="showVolunteerPage(event); toggleMobileMenu();">Volunteer</a>
            </div>
            
            <div class="mobile-account-section">
                <a href="#" class="mobile-nav-link" id="mobileAccountLink" onclick="showProfilePage(event); toggleMobileMenu();">*Account*</a>
                <a href="#" class="mobile-account-link" onclick="showPostPage(event); toggleMobileMenu();">Post</a>
                <a href="#" class="mobile-account-link" id="mobileAuthLink" onclick="handleAuthClick(); toggleMobileMenu();">Log in</a>
                
                <div class="mt-4">
                    <input type="text" id="mobileSearchInput" placeholder="Search..." class="w-full p-2 text-sm bg-white border border-gray-400 rounded">
                    <button class="w-full mt-2 bg-gray-300 p-2 text-sm font-bold border border-gray-500 rounded hover:bg-gray-400" onclick="performMobileSearch()">Search</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div id="authModal" class="auth-modal">
        <div class="auth-content">
            <span class="close-modal" onclick="closeAuthModal()">&times;</span>
            
            <div class="auth-tabs">
                <div id="loginTab" class="auth-tab active" onclick="switchTab('login')">Login</div>
                <div id="registerTab" class="auth-tab" onclick="switchTab('register')">Register</div>
            </div>
            
            <!-- Login Form -->
            <div id="loginContent" class="auth-tab-content active">
                <h2 class="auth-title">Login to ARK</h2>
                <input type="text" id="loginUsername" class="auth-input" placeholder="Username or Email">
                <input type="password" id="loginPassword" class="auth-input" placeholder="Password">
                <div id="loginError" class="error-message"></div>
                <button class="auth-button" onclick="performLogin()">Login</button>
            </div>
            
            <!-- Register Form -->
            <div id="registerContent" class="auth-tab-content">
                <h2 class="auth-title">Create an Account</h2>
                <input type="text" id="registerUsername" class="auth-input" placeholder="Username">
                <input type="email" id="registerEmail" class="auth-input" placeholder="Email">
                <div class="info-message">
                    Only Gmail email addresses are approved for registration.
                </div>
                <input type="password" id="registerPassword" class="auth-input" placeholder="Password">
                <div class="password-requirements">
                    Password must be at least 8 characters with uppercase, lowercase, and numbers.
                </div>
                <input type="password" id="confirmPassword" class="auth-input" placeholder="Confirm Password">
                <div id="registerError" class="error-message"></div>
                <button class="auth-button" onclick="performRegister()">Register</button>
            </div>
        </div>
    </div>

    <!-- Search Modal -->
    <div id="searchModal" class="search-modal">
        <div class="search-content">
            <div class="search-header">
                <h2 class="search-title">Search</h2>
                <span class="close-modal" onclick="closeSearchModal()">&times;</span>
            </div>
            
            <div class="search-filters">
                <div class="search-filter">
                    <input type="radio" id="searchAll" name="searchFilter" value="all" checked>
                    <label for="searchAll">All</label>
                </div>
                <div class="search-filter">
                    <input type="radio" id="searchPosts" name="searchFilter" value="posts">
                    <label for="searchPosts">Posts</label>
                </div>
                <div class="search-filter">
                    <input type="radio" id="searchUsers" name="searchFilter" value="users">
                    <label for="searchUsers">Users</label>
                </div>
            </div>
            
            <input type="text" id="searchInput" class="search-input" placeholder="Enter your search query..." onkeyup="performSearch(event)">
            
            <div id="searchResults" class="search-results">
                <!-- Search results will be displayed here -->
            </div>
        </div>
    </div>

    <!-- Notification Modal -->
    <div id="notificationModal" class="notification-modal">
        <div class="notification-content">
            <div class="notification-header">
                <h2 class="notification-title">Notifications</h2>
                <span class="close-modal" onclick="closeNotificationModal()">&times;</span>
            </div>
            
            <div id="notificationList">
                <!-- Notifications will be displayed here -->
            </div>
        </div>
    </div>

    <!-- Chat Modal -->
    <div id="chatModal" class="chat-modal">
        <div class="chat-content">
            <div class="chat-header">
                <div id="chatUsername">Username</div>
                <span class="close-modal" onclick="closeChatModal()">&times;</span>
            </div>
            
            <div id="chatMessages" class="chat-messages">
                <!-- Chat messages will be displayed here -->
            </div>
            
            <div class="chat-input-container">
                <input type="text" id="chatInput" class="chat-input" placeholder="Type a message..." onkeyup="handleChatInput(event)">
                <button class="chat-send-btn" onclick="sendMessage()">Send</button>
            </div>
        </div>
    </div>

    <!-- Main Container - Full Screen -->
    <div class="main-container">

        <!-- Header: ARK Logo and Top Links -->
        <header class="header-bg flex items-center justify-between p-2 relative">
            
            <!-- Logo Text -->
            <div class="text-4xl font-serif font-bold text-white pl-4">ARK</div>

            <!-- Mobile Menu Toggle -->
            <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">☰</button>

            <!-- Account Links & Search -->
            <div class="flex items-center space-x-4 pr-4 text-sm font-semibold">
                <!-- Notification Bell -->
                <div id="notificationBell" class="notification-bell" onclick="openNotificationModal()" style="display: none;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/>
                    </svg>
                    <div id="notificationBadge" class="notification-badge" style="display: none;">0</div>
                </div>
                
                <!-- Account Dropdown -->
                <div class="account-dropdown">
                    <a href="#" id="accountLink" class="text-white hover:underline" onclick="showProfilePage(event)">*Account*</a>
                    <div class="account-dropdown-menu">
                        <a href="#" onclick="showSettingsPage(event)">Settings</a>
                        <a href="#" onclick="showCertificatesPage(event)">Certificates</a>
                        <a href="#" onclick="showAchievementsPage(event)">Achievments</a>
                        <a href="#" onclick="showHistoryPage(event)">My history</a>
                    </div>
                </div>
                <a href="#" class="text-white hover:underline" onclick="showPostPage(event)">Post</a>
                <a href="#" id="authLink" class="text-white hover:underline cursor-pointer" onclick="handleAuthClick()">Log in</a>
                
                <input type="text" id="headerSearchInput" placeholder="" class="w-24 p-1 text-xs bg-white border border-gray-400" onkeyup="handleHeaderSearch(event)">
                <button class="bg-gray-300 px-2 py-1 text-xs font-bold border border-gray-500 hover:bg-gray-400" onclick="openSearchModal()">Search</button>

                <!-- Octopus Logo Image -->
                <img src="https://z-cdn-media.chatglm.cn/files/958d52f5-1e66-4d41-adaa-8fae417937e6_octupus%20logo.png?auth_key=1793282742-e95e96f3c2434de38fe756e55c0425ca-0-98a496c4a876d4e28fdc80a9a2d5e15a" alt="Octopus Logo" class="w-36 h-25 object-contain">
            </div>
        </header>

        <!-- Light Purple Bar Under Header -->
        <div class="light-purple-bar"></div>

        <!-- Main Navigation Bar -->
        <nav class="flex text-sm relative">
            <a href="#" class="nav-link nav-active" onclick="showHomePage(event)">Home</a>
            
            <!-- Browse Link with Dropdown -->
            <div class="relative group">
                <div id="browse-link" class="nav-link flex items-center">
                    Browse
                    <svg class="ml-1 w-3 h-3 transition-transform duration-200 group-hover:rotate-180" fill="currentColor" viewBox="0 0 20 20"><path d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" fill-rule="evenodd"></path></svg>
                </div>
                <div class="dropdown-menu group-hover:block transition-all duration-150">
                    <a href="#" onclick="showPublicPostsPage(event)">Public Posts</a>
                    <a href="#" onclick="showBlogsPage(event)">Blogs</a>
                    <a href="#" onclick="showIndexPage(event)">Index</a>
                    <a href="#" onclick="showClustersPage(event)">Clusters</a>
                </div>
            </div>

            <!-- About Link with Dropdown -->
            <div class="relative group">
                <div id="about-link" class="nav-link flex items-center">
                    About
                    <svg class="ml-1 w-3 h-3 transition-transform duration-200 group-hover:rotate-180" fill="currentColor" viewBox="0 0 20 20"><path d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" fill-rule="evenodd"></path></svg>
                </div>
                <div class="dropdown-menu group-hover:block transition-all duration-150">
                    <a href="#" onclick="showVisionPage(event)">Our vision and mission</a>
                    <a href="#" onclick="showContactPage(event)">Contact us</a>
                    <a href="#" onclick="showFAQPage(event)">FAQs</a>
                    <a href="#" onclick="showVolunteerPage(event)">Volunteer</a>
                </div>
            </div>
        </nav>

        <!-- Content Wrapper - Full Width -->
        <div class="content-wrapper">

            <!-- Home Page Content -->
            <div id="homePage" class="page active">
                <!-- Main Content Grid (Two Columns) -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-0 p-4 pt-6 bg-white">
                    
                    <!-- Left Column: Discovery and News -->
                    <div class="lg:col-span-1 pr-6 border-r border-dashed border-gray-400 mb-6 lg:mb-0">
                        
                        <h2 class="text-xl font-bold font-serif mb-4 text-purple-800">Discover what intrigues you</h2>
                        
                        <p class="text-xs italic mb-4">
                            Peruse subjects via media or star up to 10 intrests to have them listed below
                        </p>

                        <!-- Interest Grid -->
                        <div class="grid grid-cols-2 gap-y-2 text-sm">
                            <div><span class="text-red-500 mr-1">★</span> All subjects</div>
                            <div><span class="text-red-500 mr-1">★</span> Sports</div>
                            <div><span class="text-red-500 mr-1">★</span> Art & Theatre</div>
                            <div><span class="text-red-500 mr-1">★</span> Humanities</div>
                            <div><span class="text-red-500 mr-1">★</span> Music</div>
                            <div><span class="text-red-500 mr-1">★</span> School-Taught</div>
                            <div><span class="text-red-500 mr-1">★</span> History</div>
                            <div><span class="text-red-500 mr-1">★</span> Culinary</div>
                            <div><span class="text-red-500 mr-1">★</span> Literature</div>
                            <div><span class="text-red-500 mr-1">★</span> Uncategoriable/Niche</div>
                        </div>

                        <div class="dotted-border-h mt-6"></div>

                        <!-- News Section -->
                        <div class="mt-6">
                            <div class="flex justify-between items-end mb-2">
                                <h3 class="text-xl font-bold font-serif text-purple-800">News</h3>
                                <a href="#" class="text-xs text-gray-500 hover:text-blue-500 underline">All news</a>
                            </div>
                            
                            <!-- Latest News -->
                            <p id="newsTitle" class="font-bold mb-1">The Latest News We Have for Everyone!</p>
                            <p id="newsContent" class="text-sm leading-snug">
                                This is a preview of the channel we use to update everyone of the latest news we have to offer. Users who are <span class="font-bold italic">signed up</span> may sometimes be privy to more personal news, as well as be invited to some events that may be exclusive.
                            </p>
                            <div class="text-right text-xs mt-1"><a href="#" class="text-blue-600 hover:underline underline">Read more</a></div>
                            
                            <div class="dotted-border-h"></div>

                            <!-- More News -->
                            <p class="font-bold mb-1">More News or Something:</p>
                            <p class="text-sm leading-snug">
                                The more you scroll down the older news will be. If there is something more pressing than a new update, then it will be pinned in the "All news" page. However, the news on the Home page, as it is here, will always only have the latest information.
                            </p>
                            <div class="text-right text-xs mt-1"><a href="#" class="text-blue-600 hover:underline underline">Read more</a></div>
                        </div>
                    </div>

                    <!-- Right Column: Main Content -->
                    <div class="lg:col-span-2 pl-6">

                        <!-- Our Purpose(s) Section -->
                        <div id="ourPurposeSection" class="mb-8">
                            <h2 class="text-xl font-bold font-serif mb-4 text-purple-800">Our purpose(s):</h2>

                            <div class="text-sm space-y-4">
                                <p><span class="font-bold">The Whole Point:</span> We believe that education is an (if not the most) important factors in a persons life. Unfortunately, education is sometimes restricted due to some parties not being able to afford it. This site is aiming for the chance to give students of all ages a platform to learn as much their heart desires, while using a barter system as a currency. Knowledge in exchange for knowledge.</p>
                                <p><span class="font-bold">The most user-interactive part:</span> Users can have discussions between them and their personal community under their profile, and discussions with the public under clusters, in the form of blogs. (Blogs are divided in an orderly fashion depending on things such as subject, level, nature, etc...)</p>
                                <p><span class="font-bold">Academics:</span> We also offer free courses for users on a variety of topics, which, after completing with an 80% or above, earns them a statement of completion/participation (depending on the nature of the course.) Want to participate in a <span class="underline">fundraiser</span> for a good cause, or to <span class="underline">volunteer</span> in your community, but not sure where to start? We can help with that too.</p>
                            </div>
                        </div>
                        
                        <div class="dotted-border-h"></div>

                        <!-- LFB (Latest Fascinating Blogs) Section -->
                        <div class="mt-6">
                            <div class="flex justify-between items-end mb-2">
                                <h3 class="text-xl font-bold font-serif text-purple-800">LFB <span class="text-xs text-gray-500 font-normal italic">Latest Fascinating Blogs</span></h3>
                                <a href="#" class="text-xs text-gray-500 hover:text-blue-500 underline">All Blogs</a>
                            </div>
                            
                            <!-- Blog Post 1 -->
                            <p class="font-bold mb-1">This is the Title of the Latest Blog Everyone is Talking About!</p>
                            <p class="text-sm leading-snug mb-4">
                                Well, to be fair, "Everyone is talking about" would be subjective - considering that once you spend more time tailoring your profile it would just be the latest blog from whoever you're subscribed to/following/starred... you get the idea. Once you click on the "Read more" button you will be able to read the rest of what it is written since this is just a preview, as well as others comments/thoughts, if they choose to share them. You would also be able to see...
                                <span class="text-right text-xs mt-1 block"><a href="#" class="text-blue-600 hover:underline underline">[Read more]</a></span>
                            </p>

                            <!-- Blog Post 2 -->
                            <p class="font-bold mb-1">This is the next thing... or is it?</p>
                            <p class="text-sm leading-snug mb-4">
                                You get the idea by now don't you? Getting the bigger picture? Yes? No? Maybe? We're going to assume that you said maybe on the off-chance that we're not making ourselves clear, perchance, allow us to re-explain...
                                <span class="text-right text-xs mt-1 block"><a href="#" class="text-blue-600 hover:underline underline">[Read more]</a></span>
                            </p>

                            <!-- Blog Post 3 -->
                            <p class="font-bold mb-1">You Still Think About me, and we all Know it.</p>
                            <p class="text-sm leading-snug">
                                Now people, especially within this new generation, LOVE to pride themselves on the fact that they just let life pass around them (lmao as if that a good thing) think about the "Let them" mentality, or even the more famous "It is what it is" line that everyone always references, when in reality, humans cling to every comfort that they can get, whether it be in making a recipe your grandmother kept for you or the dead wife that haunts the narrative in ur fav movie, or the fact that the Harry Potter books had a space on the NYT bestseller for almost ten years (yikes can you imagine?)...
                                <span class="text-right text-xs mt-1 block"><a href="#" class="text-blue-600 hover:underline underline">[Read more]</a></span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Public Posts Page Content -->
            <div id="publicPostsPage" class="page">
                <div class="public-posts-container">
                    <h2 class="text-2xl font-bold mb-6 text-purple-800">Public Posts</h2>
                    
                    <div id="publicPostsList">
                        <!-- Public posts will be displayed here -->
                    </div>
                </div>
            </div>

            <!-- Other User Profile Page Content -->
            <div id="otherUserProfilePage" class="page">
                <div class="grid grid-cols-1 lg:grid-cols-4 gap-0 p-4 pt-6 bg-white">
                    <!-- Left Sidebar -->
                    <div class="lg:col-span-1 pr-6 border-r border-dashed border-gray-400">
                        <div class="profile-sidebar">
                            <h3 class="text-lg font-bold mb-4">Profile</h3>
                            <div class="profile-sidebar-item active" onclick="showOtherProfileSection('profile')">Profile</div>
                            <div class="profile-sidebar-item" onclick="showOtherProfileSection('posts')">Posts</div>
                            <div class="profile-sidebar-item" onclick="showOtherProfileSection('blogs')">Blogs</div>
                        </div>
                    </div>

                    <!-- Right Content Area -->
                    <div class="lg:col-span-3 pl-6">
                        <!-- Profile Section -->
                        <div id="otherProfileSection" class="profile-section">
                            <div class="profile-content">
                                <h2 class="text-2xl font-bold mb-6 text-purple-800">User Profile</h2>
                                
                                <!-- Horizontal Profile Layout -->
                                <div class="profile-info-grid grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <!-- Left Column -->
                                    <div>
                                        <!-- Profile Picture -->
                                        <div class="flex justify-center mb-4">
                                            <img id="otherProfilePictureDisplay" src="https://z-cdn-media.chatglm.cn/files/958d52f5-1e66-4d41-adaa-8fae417937e6_octupus%20logo.png?auth_key=1793282742-e95e96f3c2434de38fe756e55c0425ca-0-98a496c4a876d4e28fdc80a9a2d5e15a" alt="Profile Picture" class="profile-picture">
                                        </div>
                                        
                                        <div class="mb-4">
                                            <h3 class="text-lg font-semibold mb-2">Username</h3>
                                            <p id="otherProfileUsername" class="text-gray-700">Username</p>
                                        </div>
                                        
                                        <div class="mb-4">
                                            <h3 class="text-lg font-semibold mb-2">Pronouns</h3>
                                            <p id="otherProfilePronouns" class="text-gray-700">(pronouns/here)</p>
                                        </div>
                                    </div>
                                    
                                    <!-- Right Column -->
                                    <div>
                                        <div class="mb-4">
                                            <h3 class="text-lg font-semibold mb-2">Biography</h3>
                                            <p id="otherProfileBiography" class="text-gray-700">This is where you can write about yourself, your interests, and what makes you unique. Share your story with the community!</p>
                                        </div>
                                        
                                        <div class="mb-4">
                                            <h3 class="text-lg font-semibold mb-2">Aspirations</h3>
                                            <p id="otherProfileAspirations" class="text-gray-700">My aspirations for this community include sharing knowledge, learning from others, and contributing to meaningful discussions that benefit everyone.</p>
                                        </div>
                                        
                                        <div class="mb-4">
                                            <button id="followButton" class="standard-btn" onclick="handleFollow()">Follow</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Posts Section (Hidden by default) -->
                        <div id="otherPostsSection" class="profile-section" style="display: none;">
                            <div class="dashboard-container">
                                <h2 class="text-2xl font-bold mb-6 text-purple-800">Posts</h2>
                                
                                <div id="otherUserPosts">
                                    <!-- User posts will be displayed here -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Blogs Section (Hidden by default) -->
                        <div id="otherBlogsSection" class="profile-section" style="display: none;">
                            <div class="profile-content">
                                <h2 class="text-2xl font-bold mb-6 text-purple-800">Blogs</h2>
                                
                                <div id="otherUserBlogs">
                                    <!-- User blogs will be displayed here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Profile Page Content - Horizontal Layout -->
            <div id="profilePage" class="page">
                <div class="grid grid-cols-1 lg:grid-cols-4 gap-0 p-4 pt-6 bg-white">
                    <!-- Left Sidebar -->
                    <div class="lg:col-span-1 pr-6 border-r border-dashed border-gray-400">
                        <div class="profile-sidebar">
                            <h3 class="text-lg font-bold mb-4">Profile</h3>
                            <div class="profile-sidebar-item active" onclick="showProfileSection('profile')">Profile</div>
                            <div class="profile-sidebar-item" onclick="showProfileSection('discussions')">Discussions</div>
                            <div class="profile-sidebar-item" onclick="showProfileSection('posts')">Posts (5)</div>
                            <div class="profile-sidebar-item" onclick="showProfileSection('stars')">Stars (12)</div>
                            <div class="profile-sidebar-item" onclick="showProfileSection('clusters')">Clusters</div>
                            <div class="profile-sidebar-item" onclick="showProfileSection('blogs')">Blogs (3)</div>
                            <div class="profile-sidebar-item" onclick="showProfileSection('drafts')">Drafts (2)</div>
                            <div class="profile-sidebar-item" onclick="showProfileSection('notes')">Notes</div>
                            <div class="profile-sidebar-item" onclick="showProfileSection('exchanges')">Exchanges</div>
                            <div class="profile-sidebar-item" onclick="showProfileSection('messages')">Messages (4)</div>
                        </div>
                    </div>

                    <!-- Right Content Area -->
                    <div class="lg:col-span-3 pl-6">
                        <!-- Profile Section - Horizontal Layout -->
                        <div id="profileSection" class="profile-section">
                            <div class="profile-content">
                                <h2 class="text-2xl font-bold mb-6 text-purple-800">User Profile</h2>
                                
                                <!-- Horizontal Profile Layout -->
                                <div class="profile-info-grid grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <!-- Left Column -->
                                    <div>
                                        <!-- Profile Picture -->
                                        <div class="flex justify-center mb-4">
                                            <img id="profilePictureDisplay" src="https://z-cdn-media.chatglm.cn/files/958d52f5-1e66-4d41-adaa-8fae417937e6_octupus%20logo.png?auth_key=1793282742-e95e96f3c2434de38fe756e55c0425ca-0-98a496c4a876d4e28fdc80a9a2d5e15a" alt="Profile Picture" class="profile-picture">
                                        </div>
                                        
                                        <!-- View Mode -->
                                        <div id="viewProfileInfo">
                                            <div class="mb-4">
                                                <h3 class="text-lg font-semibold mb-2">Username</h3>
                                                <p id="profileUsername" class="text-gray-700">Yan</p>
                                            </div>
                                            
                                            <div class="mb-4">
                                                <h3 class="text-lg font-semibold mb-2">Email</h3>
                                                <p id="profileEmail" class="text-gray-700">yan@example.com</p>
                                            </div>
                                            
                                            <div class="mb-4">
                                                <h3 class="text-lg font-semibold mb-2">Pronouns</h3>
                                                <p id="profilePronouns" class="text-gray-700">(pronouns/here)</p>
                                            </div>
                                        </div>
                                        
                                        <!-- Edit Mode -->
                                        <div id="editProfileInfo" style="display: none;">
                                            <div class="mb-4">
                                                <h3 class="text-lg font-semibold mb-2">Username</h3>
                                                <input type="text" id="editUsername" class="edit-input" placeholder="Enter your username">
                                            </div>
                                            
                                            <div class="mb-4">
                                                <h3 class="text-lg font-semibold mb-2">Email</h3>
                                                <input type="email" id="editEmail" class="edit-input" placeholder="Enter your email">
                                            </div>
                                            
                                            <div class="mb-4">
                                                <h3 class="text-lg font-semibold mb-2">Pronouns</h3>
                                                <input type="text" id="editPronouns" class="edit-input" placeholder="(pronouns/here)">
                                            </div>
                                            
                                            <button class="change-pfp-btn" onclick="document.getElementById('profilePictureInput').click()">Change Profile Picture</button>
                                            <input type="file" id="profilePictureInput" accept="image/*" style="display: none;" onchange="previewProfilePicture(event)">
                                        </div>
                                    </div>
                                    
                                    <!-- Right Column -->
                                    <div>
                                        <!-- View Mode -->
                                        <div id="viewProfileInfo2">
                                            <div class="mb-4">
                                                <h3 class="text-lg font-semibold mb-2">User ID</h3>
                                                <p id="profileUserId" class="text-gray-700">user_1761801502387</p>
                                            </div>
                                            
                                            <div class="mb-4">
                                                <h3 class="text-lg font-semibold mb-2">Biography</h3>
                                                <p id="profileBiography" class="text-gray-700">This is where you can write about yourself, your interests, and what makes you unique. Share your story with the community!</p>
                                            </div>
                                            
                                            <div class="mb-4">
                                                <h3 class="text-lg font-semibold mb-2">Aspirations</h3>
                                                <p id="profileAspirations" class="text-gray-700">My aspirations for this community include sharing knowledge, learning from others, and contributing to meaningful discussions that benefit everyone.</p>
                                            </div>
                                            
                                            <button class="standard-btn" onclick="enableEditProfile()">
                                                Edit Profile
                                            </button>
                                        </div>
                                        
                                        <!-- Edit Mode -->
                                        <div id="editProfileInfo2" style="display: none;">
                                            <div class="mb-4">
                                                <h3 class="text-lg font-semibold mb-2">Biography</h3>
                                                <textarea id="editBiography" class="edit-textarea" placeholder="Write about yourself, your interests, and what makes you unique..."></textarea>
                                            </div>
                                            
                                            <div class="mb-4">
                                                <h3 class="text-lg font-semibold mb-2">Aspirations</h3>
                                                <textarea id="editAspirations" class="edit-textarea" placeholder="Share your aspirations for this community..."></textarea>
                                            </div>
                                            
                                            <div class="edit-buttons">
                                                <button class="standard-btn" onclick="saveProfile()">
                                                    Save Changes
                                                </button>
                                                <button class="standard-btn" style="background-color: #ccc; color: #333;" onclick="cancelEditProfile()">
                                                    Cancel
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Discussions Section (Hidden by default) -->
                        <div id="discussionsSection" class="profile-section" style="display: none;">
                            <div class="conversations-container">
                                <h2 class="text-2xl font-bold mb-6 text-purple-800">Conversations</h2>
                                
                                <div class="conversation-item">
                                    <div class="conversation-username">Username</div>
                                    <div class="conversation-content">This is a community discussion where users can freely express their thoughts and engage in meaningful conversations.</div>
                                    <div class="conversation-meta">Date/posted/year</div>
                                </div>
                                
                                <div class="conversation-item">
                                    <div class="conversation-username">Username</div>
                                    <div class="conversation-content">This is a reply to a comment in a discussion thread, providing additional insights or perspectives on the topic.</div>
                                    <div class="conversation-meta">Date/posted/year</div>
                                </div>
                                
                                <div class="conversation-item">
                                    <div class="conversation-username">Username</div>
                                    <div class="conversation-content">This is an explanation of the conversation rules and guidelines that all users are expected to follow when participating in discussions.</div>
                                    <div class="conversation-meta">Date/posted/year</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Posts Section (Hidden by default) -->
                        <div id="postsSection" class="profile-section" style="display: none;">
                            <div class="dashboard-container">
                                <h2 class="text-2xl font-bold mb-6 text-purple-800">Posts</h2>
                                
                                <div class="flex justify-between items-center mb-4">
                                    <div class="flex items-center">
                                        <input type="checkbox" id="selectAll" class="mr-2">
                                        <label for="selectAll">Select all</label>
                                    </div>
                                    <button class="standard-btn" onclick="showPostPage(event)">New post</button>
                                </div>
                                
                                <div id="userPostsList">
                                    <!-- User posts will be displayed here -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Stars Section (Hidden by default) -->
                        <div id="starsSection" class="profile-section" style="display: none;">
                            <div class="profile-content">
                                <h2 class="text-2xl font-bold mb-6 text-purple-800">Stars</h2>
                                <p class="text-gray-700 mb-4">Here you can see all your starred content.</p>
                                
                                <div class="space-y-4">
                                    <div class="border border-gray-200 rounded p-4">
                                        <h3 class="font-semibold mb-2">Starred Content 1</h3>
                                        <p class="text-sm text-gray-600">Starred: 5 days ago</p>
                                        <p class="mt-2">This is a preview of starred content...</p>
                                        <a href="#" class="text-blue-600 hover:underline text-sm mt-2 inline-block">View</a>
                                    </div>
                                    
                                    <div class="border border-gray-200 rounded p-4">
                                        <h3 class="font-semibold mb-2">Starred Content 2</h3>
                                        <p class="text-sm text-gray-600">Starred: 1 week ago</p>
                                        <p class="mt-2">This is a preview of another starred content...</p>
                                        <a href="#" class="text-blue-600 hover:underline text-sm mt-2 inline-block">View</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Clusters Section (Hidden by default) -->
                        <div id="clustersSection" class="profile-section" style="display: none;">
                            <div class="profile-content">
                                <h2 class="text-2xl font-bold mb-6 text-purple-800">Clusters</h2>
                                <p class="text-gray-700 mb-4">Here you can see all your clusters.</p>
                                
                                <div class="space-y-4">
                                    <div class="border border-gray-200 rounded p-4">
                                        <h3 class="font-semibold mb-2">Cluster Name 1</h3>
                                        <p class="text-sm text-gray-600">Members: 25</p>
                                        <p class="mt-2">This is a preview of cluster content...</p>
                                        <a href="#" class="text-blue-600 hover:underline text-sm mt-2 inline-block">View Cluster</a>
                                    </div>
                                    
                                    <div class="border border-gray-200 rounded p-4">
                                        <h3 class="font-semibold mb-2">Cluster Name 2</h3>
                                        <p class="text-sm text-gray-600">Members: 12</p>
                                        <p class="mt-2">This is a preview of another cluster...</p>
                                        <a href="#" class="text-blue-600 hover:underline text-sm mt-2 inline-block">View Cluster</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Blogs Section (Hidden by default) -->
                        <div id="blogsSection" class="profile-section" style="display: none;">
                            <div class="profile-content">
                                <h2 class="text-2xl font-bold mb-6 text-purple-800">Blogs</h2>
                                <p class="text-gray-700 mb-4">Here you can see all your blog posts.</p>
                                
                                <div class="space-y-4">
                                    <div class="border border-gray-200 rounded p-4">
                                        <h3 class="font-semibold mb-2">Blog Post Title 1</h3>
                                        <p class="text-sm text-gray-600">Published: 3 days ago</p>
                                        <p class="mt-2">This is a preview of your blog post content...</p>
                                        <a href="#" class="text-blue-600 hover:underline text-sm mt-2 inline-block">Read More</a>
                                    </div>
                                    
                                    <div class="border border-gray-200 rounded p-4">
                                        <h3 class="font-semibold mb-2">Blog Post Title 2</h3>
                                        <p class="text-sm text-gray-600">Published: 2 weeks ago</p>
                                        <p class="mt-2">This is a preview of another blog post...</p>
                                        <a href="#" class="text-blue-600 hover:underline text-sm mt-2 inline-block">Read More</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Drafts Section (Hidden by default) -->
                        <div id="draftsSection" class="profile-section" style="display: none;">
                            <div class="profile-content">
                                <h2 class="text-2xl font-bold mb-6 text-purple-800">Drafts</h2>
                                <p class="text-gray-700 mb-4">Here you can see all your drafts.</p>
                                
                                <div class="space-y-4">
                                    <div class="border border-gray-200 rounded p-4">
                                        <h3 class="font-semibold mb-2">Draft Title 1</h3>
                                        <p class="text-sm text-gray-600">Last edited: 1 day ago</p>
                                        <p class="mt-2">This is a preview of your draft content...</p>
                                        <a href="#" class="text-blue-600 hover:underline text-sm mt-2 inline-block">Continue Editing</a>
                                    </div>
                                    
                                    <div class="border border-gray-200 rounded p-4">
                                        <h3 class="font-semibold mb-2">Draft Title 2</h3>
                                        <p class="text-sm text-gray-600">Last edited: 5 days ago</p>
                                        <p class="mt-2">This is a preview of another draft...</p>
                                        <a href="#" class="text-blue-600 hover:underline text-sm mt-2 inline-block">Continue Editing</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Notes Section (Hidden by default) -->
                        <div id="notesSection" class="profile-section" style="display: none;">
                            <div class="profile-content">
                                <h2 class="text-2xl font-bold mb-6 text-purple-800">Notes</h2>
                                <p class="text-gray-700 mb-4">Here you can see all your notes.</p>
                                
                                <div class="space-y-4">
                                    <div class="border border-gray-200 rounded p-4">
                                        <h3 class="font-semibold mb-2">Note Title 1</h3>
                                        <p class="text-sm text-gray-600">Created: 2 days ago</p>
                                        <p class="mt-2">This is a preview of your note content...</p>
                                        <a href="#" class="text-blue-600 hover:underline text-sm mt-2 inline-block">View Note</a>
                                    </div>
                                    
                                    <div class="border border-gray-200 rounded p-4">
                                        <h3 class="font-semibold mb-2">Note Title 2</h3>
                                        <p class="text-sm text-gray-600">Created: 1 week ago</p>
                                        <p class="mt-2">This is a preview of another note...</p>
                                        <a href="#" class="text-blue-600 hover:underline text-sm mt-2 inline-block">View Note</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Exchanges Section (Hidden by default) -->
                        <div id="exchangesSection" class="profile-section" style="display: none;">
                            <div class="profile-content">
                                <h2 class="text-2xl font-bold mb-6 text-purple-800">Exchanges</h2>
                                <p class="text-gray-700 mb-4">Here you can see all your exchanges.</p>
                                
                                <div class="space-y-4">
                                    <div class="border border-gray-200 rounded p-4">
                                        <h3 class="font-semibold mb-2">Exchange Title 1</h3>
                                        <p class="text-sm text-gray-600">Status: Active</p>
                                        <p class="mt-2">This is a preview of your exchange content...</p>
                                        <a href="#" class="text-blue-600 hover:underline text-sm mt-2 inline-block">View Exchange</a>
                                    </div>
                                    
                                    <div class="border border-gray-200 rounded p-4">
                                        <h3 class="font-semibold mb-2">Exchange Title 2</h3>
                                        <p class="text-sm text-gray-600">Status: Completed</p>
                                        <p class="mt-2">This is a preview of another exchange...</p>
                                        <a href="#" class="text-blue-600 hover:underline text-sm mt-2 inline-block">View Exchange</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Messages Section (Hidden by default) -->
                        <div id="messagesSection" class="profile-section" style="display: none;">
                            <div class="profile-content">
                                <h2 class="text-2xl font-bold mb-6 text-purple-800">Messages</h2>
                                <p class="text-gray-700 mb-4">Here you can see all your messages.</p>
                                
                                <div id="messagesList">
                                    <!-- Messages will be displayed here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Conversations Page Content -->
            <div id="conversationsPage" class="page">
                <div class="grid grid-cols-1 lg:grid-cols-4 gap-0 p-4 pt-6 bg-white">
                    <!-- Left Sidebar -->
                    <div class="lg:col-span-1 pr-6 border-r border-dashed border-gray-400">
                        <div class="profile-sidebar">
                            <h3 class="text-lg font-bold mb-4">Profile</h3>
                            <div class="profile-sidebar-item" onclick="showProfilePage(event)">Profile</div>
                            <div class="profile-sidebar-item active" onclick="showConversationsPage(event)">Discussions</div>
                            <div class="profile-sidebar-item" onclick="showProfileSection('posts')">Posts (5)</div>
                            <div class="profile-sidebar-item" onclick="showProfileSection('stars')">Stars (12)</div>
                            <div class="profile-sidebar-item" onclick="showProfileSection('clusters')">Clusters</div>
                            <div class="profile-sidebar-item" onclick="showProfileSection('blogs')">Blogs (3)</div>
                            <div class="profile-sidebar-item" onclick="showProfileSection('drafts')">Drafts (2)</div>
                            <div class="profile-sidebar-item" onclick="showProfileSection('notes')">Notes</div>
                            <div class="profile-sidebar-item" onclick="showProfileSection('exchanges')">Exchanges</div>
                            <div class="profile-sidebar-item" onclick="showProfileSection('messages')">Messages (4)</div>
                        </div>
                    </div>

                    <!-- Right Content Area -->
                    <div class="lg:col-span-3 pl-6">
                        <div class="conversations-container">
                            <h2 class="text-2xl font-bold mb-6 text-purple-800">Conversations</h2>
                            
                            <div class="mb-4">
                                <label for="postMessage" class="block text-gray-700 font-semibold mb-2">Post a message</label>
                                <textarea id="postMessage" class="post-input" placeholder="Type your message here..."></textarea>
                                <div class="flex justify-between items-center mt-2">
                                    <div class="text-sm text-gray-600">Username</div>
                                    <div class="text-sm text-gray-600">This is a community discussion area where you can freely speak your mind and receive comments from others.</div>
                                    <button class="standard-btn" onclick="postDiscussionMessage()">Comment</button>
                                    <div class="text-sm text-gray-600">Comments: 2</div>
                                </div>
                            </div>
                            
                            <div id="discussionMessages">
                                <!-- Discussion messages will be displayed here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Dashboard Page Content -->
            <div id="dashboardPage" class="page">
                <div class="grid grid-cols-1 lg:grid-cols-4 gap-0 p-4 pt-6 bg-white">
                    <!-- Left Sidebar -->
                    <div class="lg:col-span-1 pr-6 border-r border-dashed border-gray-400">
                        <div class="profile-sidebar">
                            <h3 class="text-lg font-bold mb-4">Profile</h3>
                            <div class="profile-sidebar-item" onclick="showProfilePage(event)">Profile</div>
                            <div class="profile-sidebar-item" onclick="showConversationsPage(event)">Discussions</div>
                            <div class="profile-sidebar-item active" onclick="showDashboardPage(event)">Posts (5)</div>
                            <div class="profile-sidebar-item" onclick="showProfileSection('stars')">Stars (12)</div>
                            <div class="profile-sidebar-item" onclick="showProfileSection('clusters')">Clusters</div>
                            <div class="profile-sidebar-item" onclick="showProfileSection('blogs')">Blogs (3)</div>
                            <div class="profile-sidebar-item" onclick="showProfileSection('drafts')">Drafts (2)</div>
                            <div class="profile-sidebar-item" onclick="showProfileSection('notes')">Notes</div>
                            <div class="profile-sidebar-item" onclick="showProfileSection('exchanges')">Exchanges</div>
                            <div class="profile-sidebar-item" onclick="showProfileSection('messages')">Messages (4)</div>
                        </div>
                    </div>

                    <!-- Right Content Area -->
                    <div class="lg:col-span-3 pl-6">
                        <div class="dashboard-container">
                            <h2 class="text-2xl font-bold mb-6 text-purple-800">Dashboard</h2>
                            
                            <div class="flex justify-between items-center mb-4">
                                <div class="flex items-center">
                                    <input type="checkbox" id="selectAll" class="mr-2">
                                    <label for="selectAll">Select all</label>
                                </div>
                                <button class="standard-btn" onclick="showPostPage(event)">New post</button>
                            </div>
                            
                            <div id="userPostsList">
                                <!-- User posts will be displayed here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Page Content -->
            <div id="settingsPage" class="page">
                <div class="p-4 pt-6 bg-white">
                    <div class="profile-content">
                        <h2 class="text-2xl font-bold mb-6 text-purple-800">Settings</h2>
                        
                        <div class="space-y-4">
                            <div class="border border-gray-200 rounded p-4">
                                <h3 class="font-semibold mb-2">Privacy Settings</h3>
                                <p class="text-sm text-gray-600 mb-2">Control who can see your profile and content</p>
                                <button class="standard-btn">
                                    Manage Privacy
                                </button>
                            </div>
                            
                            <div class="border border-gray-200 rounded p-4">
                                <h3 class="font-semibold mb-2">Notification Settings</h3>
                                <p class="text-sm text-gray-600 mb-2">Choose how you receive notifications</p>
                                <button class="standard-btn">
                                    Manage Notifications
                                </button>
                            </div>
                            
                            <div class="border border-gray-200 rounded p-4">
                                <h3 class="font-semibold mb-2">Account Security</h3>
                                <p class="text-sm text-gray-600 mb-2">Update your password and security settings</p>
                                <button class="standard-btn">
                                    Update Security
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Certificates Page Content -->
            <div id="certificatesPage" class="page">
                <div class="p-4 pt-6 bg-white">
                    <div class="profile-content">
                        <h2 class="text-2xl font-bold mb-6 text-purple-800">Certificates</h2>
                        <p class="text-gray-700 mb-4">Here you can view all your earned certificates.</p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <div class="border border-gray-200 rounded p-4 text-center">
                                <div class="bg-purple-100 rounded p-4 mb-4">
                                    <h3 class="font-bold text-purple-800">Introduction to Literature</h3>
                                    <p class="text-sm text-gray-600 mt-2">Completed on: June 15, 2023</p>
                                </div>
                                <button class="standard-btn">
                                    View Certificate
                                </button>
                            </div>
                            
                            <div class="border border-gray-200 rounded p-4 text-center">
                                <div class="bg-purple-100 rounded p-4 mb-4">
                                    <h3 class="font-bold text-purple-800">Advanced Mathematics</h3>
                                    <p class="text-sm text-gray-600 mt-2">Completed on: August 22, 2023</p>
                                </div>
                                <button class="standard-btn">
                                    View Certificate
                                </button>
                            </div>
                            
                            <div class="border border-gray-200 rounded p-4 text-center">
                                <div class="bg-purple-100 rounded p-4 mb-4">
                                    <h3 class="font-bold text-purple-800">History of Art</h3>
                                    <p class="text-sm text-gray-600 mt-2">Completed on: October 5, 2023</p>
                                </div>
                                <button class="standard-btn">
                                    View Certificate
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Achievements Page Content -->
            <div id="achievementsPage" class="page">
                <div class="p-4 pt-6 bg-white">
                    <div class="profile-content">
                        <h2 class="text-2xl font-bold mb-6 text-purple-800">Achievements</h2>
                        <p class="text-gray-700 mb-4">Here you can view all your earned achievements.</p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <div class="border border-gray-200 rounded p-4 text-center">
                                <div class="bg-yellow-100 rounded p-4 mb-4">
                                    <div class="text-4xl mb-2">🏆</div>
                                    <h3 class="font-bold text-yellow-800">First Steps</h3>
                                    <p class="text-sm text-gray-600 mt-2">Completed your first course</p>
                                </div>
                            </div>
                            
                            <div class="border border-gray-200 rounded p-4 text-center">
                                <div class="bg-blue-100 rounded p-4 mb-4">
                                    <div class="text-4xl mb-2">📚</div>
                                    <h3 class="font-bold text-blue-800">Knowledge Seeker</h3>
                                    <p class="text-sm text-gray-600 mt-2">Completed 5 courses</p>
                                </div>
                            </div>
                            
                            <div class="border border-gray-200 rounded p-4 text-center">
                                <div class="bg-green-100 rounded p-4 mb-4">
                                    <div class="text-4xl mb-2">💬</div>
                                    <h3 class="font-bold text-green-800">Active Contributor</h3>
                                    <p class="text-sm text-gray-600 mt-2">Made 10 discussion posts</p>
                                </div>
                            </div>
                            
                            <div class="border border-gray-200 rounded p-4 text-center">
                                <div class="bg-purple-100 rounded p-4 mb-4">
                                    <div class="text-4xl mb-2">✍️</div>
                                    <h3 class="font-bold text-purple-800">Blogger</h3>
                                    <p class="text-sm text-gray-600 mt-2">Published 5 blog posts</p>
                                </div>
                            </div>
                            
                            <div class="border border-gray-200 rounded p-4 text-center">
                                <div class="bg-red-100 rounded p-4 mb-4">
                                    <div class="text-4xl mb-2">🔥</div>
                                    <h3 class="font-bold text-red-800">Streak Master</h3>
                                    <p class="text-sm text-gray-600 mt-2">30-day login streak</p>
                                </div>
                            </div>
                            
                            <div class="border border-gray-200 rounded p-4 text-center opacity-50">
                                <div class="bg-gray-100 rounded p-4 mb-4">
                                    <div class="text-4xl mb-2">🌟</div>
                                    <h3 class="font-bold text-gray-600">Expert Learner</h3>
                                    <p class="text-sm text-gray-500 mt-2">Complete 20 courses</p>
                                    <p class="text-xs text-gray-500 mt-1">15/20 completed</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- History Page Content -->
            <div id="historyPage" class="page">
                <div class="p-4 pt-6 bg-white">
                    <div class="profile-content">
                        <h2 class="text-2xl font-bold mb-6 text-purple-800">My History</h2>
                        <p class="text-gray-700 mb-4">Here you can view your activity history.</p>
                        
                        <div class="space-y-4">
                            <div class="border-l-4 border-purple-500 pl-4">
                                <h3 class="font-semibold">Completed Course: Introduction to Literature</h3>
                                <p class="text-sm text-gray-600">June 15, 2023</p>
                                <p class="mt-2">You successfully completed the Introduction to Literature course with a score of 92%.</p>
                            </div>
                            
                            <div class="border-l-4 border-blue-500 pl-4">
                                <h3 class="font-semibold">Posted Blog: "The Evolution of Modern Poetry"</h3>
                                <p class="text-sm text-gray-600">June 10, 2023</p>
                                <p class="mt-2">Your blog post received 15 likes and 8 comments.</p>
                            </div>
                            
                            <div class="border-l-4 border-green-500 pl-4">
                                <h3 class="font-semibold">Joined Discussion: "Classical vs Modern Literature"</h3>
                                <p class="text-sm text-gray-600">June 5, 2023</p>
                                <p class="mt-2">You contributed 3 comments to this discussion.</p>
                            </div>
                            
                            <div class="border-l-4 border-yellow-500 pl-4">
                                <h3 class="font-semibold">Earned Achievement: First Steps</h3>
                                <p class="text-sm text-gray-600">May 28, 2023</p>
                                <p class="mt-2">You completed your first course on the platform.</p>
                            </div>
                            
                            <div class="border-l-4 border-purple-500 pl-4">
                                <h3 class="font-semibold">Completed Course: Advanced Mathematics</h3>
                                <p class="text-sm text-gray-600">May 20, 2023</p>
                                <p class="mt-2">You successfully completed the Advanced Mathematics course with a score of 88%.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Post Page Content -->
            <div id="postPage" class="page">
                <div class="p-4 pt-6 bg-white">
                    <div class="profile-content">
                        <h2 class="text-2xl font-bold mb-6 text-purple-800">Create a New Post</h2>
                        
                        <div class="mb-4">
                            <label for="postTitle" class="block text-gray-700 font-semibold mb-2">Title</label>
                            <input type="text" id="postTitle" class="w-full p-2 border border-gray-300 rounded" placeholder="Enter your post title">
                        </div>
                        
                        <div class="mb-4">
                            <label for="postCategory" class="block text-gray-700 font-semibold mb-2">Category</label>
                            <select id="postCategory" class="w-full p-2 border border-gray-300 rounded">
                                <option value="">Select a category</option>
                                <option value="blog">Blog</option>
                                <option value="discussion">Discussion</option>
                                <option value="question">Question</option>
                                <option value="resource">Resource</option>
                            </select>
                        </div>
                        
                        <div class="mb-4">
                            <label for="postContent" class="block text-gray-700 font-semibold mb-2">Content</label>
                            <textarea id="postContent" rows="10" class="w-full p-2 border border-gray-300 rounded" placeholder="Write your post content here..."></textarea>
                        </div>
                        
                        <div class="mb-4">
                            <label for="postTags" class="block text-gray-700 font-semibold mb-2">Tags</label>
                            <input type="text" id="postTags" class="w-full p-2 border border-gray-300 rounded" placeholder="Enter tags separated by commas">
                        </div>
                        
                        <div class="mb-4">
                            <label class="flex items-center">
                                <input type="checkbox" id="postPublic" class="mr-2" checked>
                                <span>Make this post public</span>
                            </label>
                        </div>
                        
                        <div class="flex gap-2">
                            <button class="standard-btn" onclick="publishPost()">
                                Publish Post
                            </button>
                            <button class="standard-btn" style="background-color: #ccc; color: #333;" onclick="saveDraft()">
                                Save as Draft
                            </button>
                            <button class="standard-btn" style="background-color: #ccc; color: #333;" onclick="showHomePage()">
                                Cancel
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Blogs Page Content -->
            <div id="blogsPage" class="page">
                <div class="p-4 pt-6 bg-white">
                    <div class="profile-content">
                        <h2 class="text-2xl font-bold mb-6 text-purple-800">Blogs</h2>
                        <p class="text-gray-700 mb-4">Discover and explore blogs from our community members.</p>
                        
                        <div id="blogsList">
                            <!-- Blogs will be displayed here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Index Page Content -->
            <div id="indexPage" class="page">
                <div class="p-4 pt-6 bg-white">
                    <div class="profile-content">
                        <h2 class="text-2xl font-bold mb-6 text-purple-800">Index</h2>
                        <p class="text-gray-700 mb-4">Browse our comprehensive index of topics and resources.</p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <div class="border border-gray-200 rounded p-4">
                                <h3 class="font-semibold mb-2">Literature</h3>
                                <p class="text-sm text-gray-600 mb-2">Explore literary works and analysis</p>
                                <a href="#" class="text-blue-600 hover:underline text-sm">Browse</a>
                            </div>
                            
                            <div class="border border-gray-200 rounded p-4">
                                <h3 class="font-semibold mb-2">Mathematics</h3>
                                <p class="text-sm text-gray-600 mb-2">Mathematical concepts and problem-solving</p>
                                <a href="#" class="text-blue-600 hover:underline text-sm">Browse</a>
                            </div>
                            
                            <div class="border border-gray-200 rounded p-4">
                                <h3 class="font-semibold mb-2">History</h3>
                                <p class="text-sm text-gray-600 mb-2">Historical events and perspectives</p>
                                <a href="#" class="text-blue-600 hover:underline text-sm">Browse</a>
                            </div>
                            
                            <div class="border border-gray-200 rounded p-4">
                                <h3 class="font-semibold mb-2">Science</h3>
                                <p class="text-sm text-gray-600 mb-2">Scientific discoveries and theories</p>
                                <a href="#" class="text-blue-600 hover:underline text-sm">Browse</a>
                            </div>
                            
                            <div class="border border-gray-200 rounded p-4">
                                <h3 class="font-semibold mb-2">Art</h3>
                                <p class="text-sm text-gray-600 mb-2">Art history and appreciation</p>
                                <a href="#" class="text-blue-600 hover:underline text-sm">Browse</a>
                            </div>
                            
                            <div class="border border-gray-200 rounded p-4">
                                <h3 class="font-semibold mb-2">Philosophy</h3>
                                <p class="text-sm text-gray-600 mb-2">Philosophical concepts and thinkers</p>
                                <a href="#" class="text-blue-600 hover:underline text-sm">Browse</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Clusters Page Content -->
            <div id="clustersPage" class="page">
                <div class="p-4 pt-6 bg-white">
                    <div class="profile-content">
                        <h2 class="text-2xl font-bold mb-6 text-purple-800">Clusters</h2>
                        <p class="text-gray-700 mb-4">Join clusters to connect with like-minded individuals.</p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <div class="border border-gray-200 rounded p-4">
                                <h3 class="font-semibold mb-2">Literature Enthusiasts</h3>
                                <p class="text-sm text-gray-600 mb-2">Discuss classic and contemporary literature</p>
                                <p class="text-sm text-gray-600 mb-2">Members: 156</p>
                                <button class="standard-btn">Join Cluster</button>
                            </div>
                            
                            <div class="border border-gray-200 rounded p-4">
                                <h3 class="font-semibold mb-2">Math Problem Solvers</h3>
                                <p class="text-sm text-gray-600 mb-2">Share and solve mathematical challenges</p>
                                <p class="text-sm text-gray-600 mb-2">Members: 89</p>
                                <button class="standard-btn">Join Cluster</button>
                            </div>
                            
                            <div class="border border-gray-200 rounded p-4">
                                <h3 class="font-semibold mb-2">History Buffs</h3>
                                <p class="text-sm text-gray-600 mb-2">Explore historical events and perspectives</p>
                                <p class="text-sm text-gray-600 mb-2">Members: 124</p>
                                <button class="standard-btn">Join Cluster</button>
                            </div>
                            
                            <div class="border border-gray-200 rounded p-4">
                                <h3 class="font-semibold mb-2">Science Explorers</h3>
                                <p class="text-sm text-gray-600 mb-2">Discuss scientific discoveries and theories</p>
                                <p class="text-sm text-gray-600 mb-2">Members: 97</p>
                                <button class="standard-btn">Join Cluster</button>
                            </div>
                            
                            <div class="border border-gray-200 rounded p-4">
                                <h3 class="font-semibold mb-2">Art Appreciation</h3>
                                <p class="text-sm text-gray-600 mb-2">Share and discuss art from various periods</p>
                                <p class="text-sm text-gray-600 mb-2">Members: 112</p>
                                <button class="standard-btn">Join Cluster</button>
                            </div>
                            
                            <div class="border border-gray-200 rounded p-4">
                                <h3 class="font-semibold mb-2">Philosophy Thinkers</h3>
                                <p class="text-sm text-gray-600 mb-2">Explore philosophical concepts and ideas</p>
                                <p class="text-sm text-gray-600 mb-2">Members: 78</p>
                                <button class="standard-btn">Join Cluster</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Vision Page Content -->
            <div id="visionPage" class="page">
                <div class="p-4 pt-6 bg-white">
                    <div class="profile-content">
                        <h2 class="text-2xl font-bold mb-6 text-purple-800">Our Vision and Mission</h2>
                        
                        <div class="space-y-4">
                            <div>
                                <h3 class="text-xl font-semibold mb-2">Our Vision</h3>
                                <p class="text-gray-700">We envision a world where quality education is accessible to everyone, regardless of their financial situation. Through our platform, we aim to create a global community of learners who share knowledge freely and support each other's growth.</p>
                            </div>
                            
                            <div>
                                <h3 class="text-xl font-semibold mb-2">Our Mission</h3>
                                <p class="text-gray-700">Our mission is to provide a platform where knowledge can be exchanged freely. We believe that everyone has something valuable to teach and something new to learn. By facilitating this exchange, we hope to democratize education and create opportunities for personal and professional growth.</p>
                            </div>
                            
                            <div>
                                <h3 class="text-xl font-semibold mb-2">Our Values</h3>
                                <ul class="list-disc pl-5 text-gray-700">
                                    <li>Accessibility: Education should be available to all</li>
                                    <li>Community: Learning is enhanced through collaboration</li>
                                    <li>Quality: We strive for excellence in all our offerings</li>
                                    <li>Inclusivity: We welcome diverse perspectives and backgrounds</li>
                                    <li>Innovation: We continuously improve our platform and methods</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contact Page Content -->
            <div id="contactPage" class="page">
                <div class="p-4 pt-6 bg-white">
                    <div class="profile-content">
                        <h2 class="text-2xl font-bold mb-6 text-purple-800">Contact Us</h2>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h3 class="text-lg font-semibold mb-4">Get in Touch</h3>
                                <p class="text-gray-700 mb-4">We'd love to hear from you! Whether you have questions, feedback, or suggestions, feel free to reach out.</p>
                                
                                <div class="space-y-2">
                                    <p class="text-gray-700"><strong>Email:</strong> contact@ark.edu</p>
                                    <p class="text-gray-700"><strong>Phone:</strong> +1 (555) 123-4567</p>
                                    <p class="text-gray-700"><strong>Address:</strong> 123 Education Street, Learning City, 12345</p>
                                </div>
                            </div>
                            
                            <div>
                                <h3 class="text-lg font-semibold mb-4">Send Us a Message</h3>
                                
                                <div class="space-y-4">
                                    <div>
                                        <label for="contactName" class="block text-gray-700 font-semibold mb-2">Name</label>
                                        <input type="text" id="contactName" class="w-full p-2 border border-gray-300 rounded" placeholder="Your name">
                                    </div>
                                    
                                    <div>
                                        <label for="contactEmail" class="block text-gray-700 font-semibold mb-2">Email</label>
                                        <input type="email" id="contactEmail" class="w-full p-2 border border-gray-300 rounded" placeholder="Your email">
                                    </div>
                                    
                                    <div>
                                        <label for="contactMessage" class="block text-gray-700 font-semibold mb-2">Message</label>
                                        <textarea id="contactMessage" rows="5" class="w-full p-2 border border-gray-300 rounded" placeholder="Your message"></textarea>
                                    </div>
                                    
                                    <button class="standard-btn" onclick="submitContactForm()">Send Message</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- FAQ Page Content -->
            <div id="faqPage" class="page">
                <div class="p-4 pt-6 bg-white">
                    <div class="profile-content">
                        <h2 class="text-2xl font-bold mb-6 text-purple-800">Frequently Asked Questions</h2>
                        
                        <div class="space-y-4">
                            <div class="border border-gray-200 rounded p-4">
                                <h3 class="font-semibold mb-2">How do I create an account?</h3>
                                <p class="text-gray-700">Click on the "Log in" button in the header, then select the "Register" tab. Fill in your username, Gmail email address, and a password that meets our security requirements.</p>
                            </div>
                            
                            <div class="border border-gray-200 rounded p-4">
                                <h3 class="font-semibold mb-2">Why do I need a Gmail account to register?</h3>
                                <p class="text-gray-700">We currently only support Gmail addresses for registration to ensure account security and streamline our verification process.</p>
                            </div>
                            
                            <div class="border border-gray-200 rounded p-4">
                                <h3 class="font-semibold mb-2">How do I post content?</h3>
                                <p class="text-gray-700">Once logged in, click on the "Post" button in the header. Fill in the title, category, content, and tags for your post, then choose whether to make it public or private before publishing.</p>
                            </div>
                            
                            <div class="border border-gray-200 rounded p-4">
                                <h3 class="font-semibold mb-2">Can I edit or delete my posts?</h3>
                                <p class="text-gray-700">Yes, you can edit or delete your own posts at any time. Navigate to your profile, select the "Posts" section, and use the options available for each post.</p>
                            </div>
                            
                            <div class="border border-gray-200 rounded p-4">
                                <h3 class="font-semibold mb-2">How do I join a cluster?</h3>
                                <p class="text-gray-700">Navigate to the "Clusters" page from the "Browse" dropdown menu. Find a cluster that interests you and click the "Join Cluster" button.</p>
                            </div>
                            
                            <div class="border border-gray-200 rounded p-4">
                                <h3 class="font-semibold mb-2">How do I earn certificates?</h3>
                                <p class="text-gray-700">Complete courses with a score of 80% or higher to earn a certificate of completion. You can view your earned certificates in the "Certificates" section of your profile.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Volunteer Page Content -->
            <div id="volunteerPage" class="page">
                <div class="p-4 pt-6 bg-white">
                    <div class="profile-content">
                        <h2 class="text-2xl font-bold mb-6 text-purple-800">Volunteer With Us</h2>
                        
                        <div class="space-y-4">
                            <div>
                                <h3 class="text-xl font-semibold mb-2">Why Volunteer?</h3>
                                <p class="text-gray-700">Volunteering with ARK is a rewarding experience that allows you to contribute to our mission of making education accessible to all. As a volunteer, you'll have the opportunity to share your knowledge, develop new skills, and connect with a community of passionate learners.</p>
                            </div>
                            
                            <div>
                                <h3 class="text-xl font-semibold mb-2">Volunteer Opportunities</h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                                    <div class="border border-gray-200 rounded p-4">
                                        <h4 class="font-semibold mb-2">Content Creator</h4>
                                        <p class="text-sm text-gray-600">Create educational content in your area of expertise</p>
                                    </div>
                                    
                                    <div class="border border-gray-200 rounded p-4">
                                        <h4 class="font-semibold mb-2">Community Moderator</h4>
                                        <p class="text-sm text-gray-600">Help maintain a positive and respectful community environment</p>
                                    </div>
                                    
                                    <div class="border border-gray-200 rounded p-4">
                                        <h4 class="font-semibold mb-2">Course Reviewer</h4>
                                        <p class="text-sm text-gray-600">Review and provide feedback on course materials</p>
                                    </div>
                                    
                                    <div class="border border-gray-200 rounded p-4">
                                        <h4 class="font-semibold mb-2">Technical Support</h4>
                                        <p class="text-sm text-gray-600">Assist users with technical issues and platform navigation</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div>
                                <h3 class="text-xl font-semibold mb-2">How to Apply</h3>
                                <p class="text-gray-700">To apply as a volunteer, please fill out the form below with your details and areas of interest. Our team will review your application and get in touch with you within 5-7 business days.</p>
                                
                                <div class="mt-4 space-y-4">
                                    <div>
                                        <label for="volunteerName" class="block text-gray-700 font-semibold mb-2">Name</label>
                                        <input type="text" id="volunteerName" class="w-full p-2 border border-gray-300 rounded" placeholder="Your name">
                                    </div>
                                    
                                    <div>
                                        <label for="volunteerEmail" class="block text-gray-700 font-semibold mb-2">Email</label>
                                        <input type="email" id="volunteerEmail" class="w-full p-2 border border-gray-300 rounded" placeholder="Your email">
                                    </div>
                                    
                                    <div>
                                        <label for="volunteerRole" class="block text-gray-700 font-semibold mb-2">Area of Interest</label>
                                        <select id="volunteerRole" class="w-full p-2 border border-gray-300 rounded">
                                            <option value="">Select an area</option>
                                            <option value="content">Content Creator</option>
                                            <option value="moderator">Community Moderator</option>
                                            <option value="reviewer">Course Reviewer</option>
                                            <option value="support">Technical Support</option>
                                        </select>
                                    </div>
                                    
                                    <div>
                                        <label for="volunteerExperience" class="block text-gray-700 font-semibold mb-2">Relevant Experience</label>
                                        <textarea id="volunteerExperience" rows="4" class="w-full p-2 border border-gray-300 rounded" placeholder="Tell us about your relevant experience"></textarea>
                                    </div>
                                    
                                    <button class="standard-btn" onclick="submitVolunteerForm()">Submit Application</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        // Initialize user accounts database
        let userAccounts = JSON.parse(localStorage.getItem('userAccounts')) || {};
        
        // Initialize sample posts data
        let postsData = JSON.parse(localStorage.getItem('postsData')) || [
            {
                id: 'post_1',
                title: 'The Title of Your Post by Your Username',
                content: 'This is a brief description of the topic or theme of your post, giving readers an idea of what to expect.',
                author: 'Yan',
                authorId: 'user_1761801502387',
                date: '2023-06-15',
                type: 'post',
                language: 'English',
                comments: 0,
                public: true
            },
            {
                id: 'post_2',
                title: 'This is the Title of the Latest Blog Everyone is Talking About!',
                content: 'Well, to be fair, "Everyone is talking about" would be subjective - considering that once you spend more time tailoring your profile it would just be the latest blog from whoever you\'re subscribed to/following/starred... you get the idea.',
                author: 'Alex',
                authorId: 'user_1761801502388',
                date: '2023-06-10',
                type: 'blog',
                language: 'English',
                comments: 15,
                public: true
            },
            {
                id: 'post_3',
                title: 'Understanding Modern Poetry',
                content: 'An exploration of contemporary poetic forms and their cultural significance in today\'s society.',
                author: 'Sam',
                authorId: 'user_1761801502389',
                date: '2023-06-05',
                type: 'blog',
                language: 'English',
                comments: 8,
                public: true
            },
            {
                id: 'post_4',
                title: 'The Evolution of Modern Poetry',
                content: 'Your blog post received 15 likes and 8 comments.',
                author: 'Jordan',
                authorId: 'user_1761801502390',
                date: '2023-05-28',
                type: 'blog',
                language: 'English',
                comments: 12,
                public: true
            },
            {
                id: 'post_5',
                title: 'Classical vs Modern Literature',
                content: 'A comparative analysis of classical and modern literary works, examining their themes, styles, and cultural impact.',
                author: 'Taylor',
                authorId: 'user_1761801502391',
                date: '2023-05-20',
                type: 'discussion',
                language: 'English',
                comments: 25,
                public: true
            }
        ];
        
        // Initialize follow requests
        let followRequests = JSON.parse(localStorage.getItem('followRequests')) || {};
        
        // Initialize following relationships
        let following = JSON.parse(localStorage.getItem('following')) || {};
        
        // Initialize notifications
        let notifications = JSON.parse(localStorage.getItem('notifications')) || [];
        
        // Initialize messages
        let messages = JSON.parse(localStorage.getItem('messages')) || {};
        
        // Initialize discussion messages
        let discussionMessages = JSON.parse(localStorage.getItem('discussionMessages')) || [
            {
                id: 'disc_1',
                author: 'Alex',
                authorId: 'user_1761801502388',
                content: 'This is a community discussion where users can freely express their thoughts and engage in meaningful conversations.',
                date: '2023-06-15',
                replies: 2
            },
            {
                id: 'disc_2',
                author: 'Sam',
                authorId: 'user_1761801502389',
                content: 'This is a reply to a comment in a discussion thread, providing additional insights or perspectives on the topic.',
                date: '2023-06-10',
                replies: 0
            },
            {
                id: 'disc_3',
                author: 'Jordan',
                authorId: 'user_1761801502390',
                content: 'This is an explanation of the conversation rules and guidelines that all users are expected to follow when participating in discussions.',
                date: '2023-06-05',
                replies: 1
            }
        ];
        
        // Store profile picture data temporarily
        let tempProfilePicture = null;
        
        // Current viewing user ID
        let currentViewingUserId = null;
        
        // Current chat user ID
        let currentChatUserId = null;
        
        // Check login status on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateAuthLink();
            updateProfileInfo();
            initializeSampleData();
            updateNotifications();
            updateNewsSection();
            loadPublicPosts();
            loadUserPosts();
            loadDiscussionMessages();
            
            // Check if mobile menu should be shown
            checkMobileMenu();
        });

        // Check if mobile menu should be shown based on screen size
        function checkMobileMenu() {
            const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
            const desktopNav = document.querySelector('nav');
            
            if (window.innerWidth <= 768) {
                mobileMenuToggle.style.display = 'block';
                desktopNav.style.display = 'none';
            } else {
                mobileMenuToggle.style.display = 'none';
                desktopNav.style.display = 'flex';
            }
        }

        // Toggle mobile menu
        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobileMenu');
            if (mobileMenu.style.display === 'flex') {
                mobileMenu.style.display = 'none';
            } else {
                mobileMenu.style.display = 'flex';
            }
        }

        // Toggle mobile dropdown
        function toggleMobileDropdown(dropdownId) {
            const dropdown = document.getElementById(dropdownId);
            if (dropdown.style.display === 'block') {
                dropdown.style.display = 'none';
            } else {
                dropdown.style.display = 'block';
            }
        }

        // Perform mobile search
        function performMobileSearch() {
            const query = document.getElementById('mobileSearchInput').value.trim();
            if (query) {
                document.getElementById('searchInput').value = query;
                toggleMobileMenu();
                openSearchModal();
                performSearch();
            }
        }

        // Initialize sample data if not exists
        function initializeSampleData() {
            // Save sample posts data if not exists
            if (!localStorage.getItem('postsData')) {
                localStorage.setItem('postsData', JSON.stringify(postsData));
            }
            
            // Save discussion messages if not exists
            if (!localStorage.getItem('discussionMessages')) {
                localStorage.setItem('discussionMessages', JSON.stringify(discussionMessages));
            }
            
            // Create sample users if not exists
            if (!userAccounts['user_1761801502388']) {
                userAccounts['user_1761801502388'] = {
                    username: 'Alex',
                    email: 'alex@gmail.com',
                    password: 'Password123',
                    pronouns: 'they/them',
                    biography: 'Passionate about literature and modern poetry. Love exploring different perspectives and sharing insights with the community.',
                    aspirations: 'To create a space where people can freely discuss literature and learn from each other.',
                    createdAt: new Date().toISOString()
                };
            }
            
            if (!userAccounts['user_1761801502389']) {
                userAccounts['user_1761801502389'] = {
                    username: 'Sam',
                    email: 'sam@gmail.com',
                    password: 'Password123',
                    pronouns: 'they/them',
                    biography: 'Literature enthusiast and poetry lover. Always looking for new ways to interpret classic works.',
                    aspirations: 'To help others discover the joy of reading and writing poetry.',
                    createdAt: new Date().toISOString()
                };
            }
            
            if (!userAccounts['user_1761801502390']) {
                userAccounts['user_1761801502390'] = {
                    username: 'Jordan',
                    email: 'jordan@gmail.com',
                    password: 'Password123',
                    pronouns: 'he/him',
                    biography: 'Writer and literary critic. Specializing in contemporary poetry and its cultural significance.',
                    aspirations: 'To bridge the gap between academic and popular discussions of literature.',
                    createdAt: new Date().toISOString()
                };
            }
            
            if (!userAccounts['user_1761801502391']) {
                userAccounts['user_1761801502391'] = {
                    username: 'Taylor',
                    email: 'taylor@gmail.com',
                    password: 'Password123',
                    pronouns: 'she/her',
                    biography: 'Academic researcher in comparative literature. Interested in how classical works influence modern writing.',
                    aspirations: 'To make literary analysis accessible to everyone, regardless of their background.',
                    createdAt: new Date().toISOString()
                };
            }
            
            // Save updated user accounts
            localStorage.setItem('userAccounts', JSON.stringify(userAccounts));
        }

        // Generate a unique user ID
        function generateUserId() {
            // Use timestamp to ensure uniqueness
            const timestamp = Date.now();
            // Add a random number for additional uniqueness
            const randomNum = Math.floor(Math.random() * 10000);
            return `user_${timestamp}${randomNum}`;
        }

        // Handle auth link click
        function handleAuthClick() {
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            
            if (isLoggedIn) {
                // Log out
                localStorage.setItem('isLoggedIn', 'false');
                localStorage.removeItem('username');
                localStorage.removeItem('userId');
                updateAuthLink();
                updateNewsSection();
                showHomePage();
                showNotification('You have been logged out successfully.');
            } else {
                // Show auth modal
                document.getElementById('authModal').style.display = 'flex';
            }
        }

        // Update auth link based on login status
        function updateAuthLink() {
            const authLink = document.getElementById('authLink');
            const mobileAuthLink = document.getElementById('mobileAuthLink');
            const accountLink = document.getElementById('accountLink');
            const mobileAccountLink = document.getElementById('mobileAccountLink');
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            const ourPurposeSection = document.getElementById('ourPurposeSection');
            
            if (isLoggedIn) {
                const username = localStorage.getItem('username') || 'User';
                accountLink.textContent = username;
                accountLink.title = `Logged in as ${username}`;
                mobileAccountLink.textContent = username;
                mobileAccountLink.title = `Logged in as ${username}`;
                
                // Change login button to logout
                authLink.textContent = 'Log out';
                authLink.title = 'Click to log out';
                mobileAuthLink.textContent = 'Log out';
                mobileAuthLink.title = 'Click to log out';
                
                // Show notification bell if logged in
                document.getElementById('notificationBell').style.display = 'block';
                
                // Hide the "Our purpose(s)" section when logged in
                if (ourPurposeSection) {
                    ourPurposeSection.style.display = 'none';
                }
            } else {
                accountLink.textContent = '*Account*';
                accountLink.title = 'Click to log in';
                mobileAccountLink.textContent = '*Account*';
                mobileAccountLink.title = 'Click to log in';
                
                // Change logout button to login
                authLink.textContent = 'Log in';
                authLink.title = 'Click to log in';
                mobileAuthLink.textContent = 'Log in';
                mobileAuthLink.title = 'Click to log in';
                
                // Hide notification bell if logged out
                document.getElementById('notificationBell').style.display = 'none';
                
                // Show the "Our purpose(s)" section when logged out
                if (ourPurposeSection) {
                    ourPurposeSection.style.display = 'block';
                }
            }
        }

        // Update news section based on login status
        function updateNewsSection() {
            const newsTitle = document.getElementById('newsTitle');
            const newsContent = document.getElementById('newsContent');
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            
            if (isLoggedIn) {
                // Update news for logged in users
                newsTitle.textContent = 'The Latest News We Have for You!';
                newsContent.innerHTML = 'This is a preview of the channel we use to update everyone of the latest news we have to offer. Thank you for signing up! You will be personally invited to things like fundraisers and fairs hosted by us, which grants you the chance to...';
            } else {
                // Reset to default news for logged out users
                newsTitle.textContent = 'The Latest News We Have for Everyone!';
                newsContent.innerHTML = 'This is a preview of the channel we use to update everyone of the latest news we have to offer. Users who are <span class="font-bold italic">signed up</span> may sometimes be privy to more personal news, as well as be invited to some events that may be exclusive.';
            }
        }

        // Update profile information
        function updateProfileInfo() {
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            
            if (isLoggedIn) {
                const userId = localStorage.getItem('userId');
                if (userId && userAccounts[userId]) {
                    const user = userAccounts[userId];
                    
                    // Update profile display
                    document.getElementById('profileUsername').textContent = user.username || 'Yan';
                    document.getElementById('profileEmail').textContent = user.email || 'yan@example.com';
                    document.getElementById('profilePronouns').textContent = user.pronouns || '(pronouns/here)';
                    document.getElementById('profileUserId').textContent = userId;
                    document.getElementById('profileBiography').textContent = user.biography || 'This is where you can write about yourself, your interests, and what makes you unique. Share your story with the community!';
                    document.getElementById('profileAspirations').textContent = user.aspirations || 'My aspirations for this community include sharing knowledge, learning from others, and contributing to meaningful discussions that benefit everyone.';
                    
                    // Update profile picture if available
                    if (user.profilePicture) {
                        document.getElementById('profilePictureDisplay').src = user.profilePicture;
                    }
                } else {
                    // Default values for demo
                    document.getElementById('profileUsername').textContent = 'Yan';
                    document.getElementById('profileEmail').textContent = 'yan@example.com';
                    document.getElementById('profilePronouns').textContent = '(pronouns/here)';
                    document.getElementById('profileUserId').textContent = 'user_1761801502387';
                    document.getElementById('profileBiography').textContent = 'This is where you can write about yourself, your interests, and what makes you unique. Share your story with the community!';
                    document.getElementById('profileAspirations').textContent = 'My aspirations for this community include sharing knowledge, learning from others, and contributing to meaningful discussions that benefit everyone.';
                }
            }
        }

        // Enable edit profile mode
        function enableEditProfile() {
            const userId = localStorage.getItem('userId');
            if (userId && userAccounts[userId]) {
                const user = userAccounts[userId];
                
                // Populate edit fields with current values
                document.getElementById('editUsername').value = user.username || '';
                document.getElementById('editEmail').value = user.email || '';
                document.getElementById('editPronouns').value = user.pronouns || '';
                document.getElementById('editBiography').value = user.biography || '';
                document.getElementById('editAspirations').value = user.aspirations || '';
            } else {
                // Default values for demo
                document.getElementById('editUsername').value = 'Yan';
                document.getElementById('editEmail').value = 'yan@example.com';
                document.getElementById('editPronouns').value = '';
                document.getElementById('editBiography').value = 'This is where you can write about yourself, your interests, and what makes you unique. Share your story with the community!';
                document.getElementById('editAspirations').value = 'My aspirations for this community include sharing knowledge, learning from others, and contributing to meaningful discussions that benefit everyone.';
            }
            
            // Reset temp profile picture
            tempProfilePicture = null;
            
            // Show edit mode, hide view mode
            document.getElementById('viewProfileInfo').style.display = 'none';
            document.getElementById('viewProfileInfo2').style.display = 'none';
            document.getElementById('editProfileInfo').style.display = 'block';
            document.getElementById('editProfileInfo2').style.display = 'block';
        }

        // Cancel edit profile
        function cancelEditProfile() {
            // Reset temp profile picture
            tempProfilePicture = null;
            
            // Show view mode, hide edit mode
            document.getElementById('viewProfileInfo').style.display = 'block';
            document.getElementById('viewProfileInfo2').style.display = 'block';
            document.getElementById('editProfileInfo').style.display = 'none';
            document.getElementById('editProfileInfo2').style.display = 'none';
        }

        // Preview profile picture
        function previewProfilePicture(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    // Store the image data temporarily
                    tempProfilePicture = e.target.result;
                    // Update the profile picture display
                    document.getElementById('profilePictureDisplay').src = tempProfilePicture;
                };
                reader.readAsDataURL(file);
            }
        }

        // Save profile changes
        function saveProfile() {
            const userId = localStorage.getItem('userId');
            const username = document.getElementById('editUsername').value.trim();
            const email = document.getElementById('editEmail').value.trim();
            const pronouns = document.getElementById('editPronouns').value.trim();
            const biography = document.getElementById('editBiography').value.trim();
            const aspirations = document.getElementById('editAspirations').value.trim();
            
            // Validate inputs
            if (!username) {
                showNotification('Username cannot be empty.');
                return;
            }
            
            if (!email) {
                showNotification('Email cannot be empty.');
                return;
            }
            
            // Validate email format
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                showNotification('Please enter a valid email address.');
                return;
            }
            
            // Check if email is a Gmail address
            if (!email.toLowerCase().endsWith('@gmail.com')) {
                showNotification('Only Gmail email addresses are approved.');
                return;
            }
            
            // Check if username already exists (excluding current user)
            for (const id in userAccounts) {
                if (id !== userId && userAccounts[id].username === username) {
                    showNotification('Username already exists. Please choose a different one.');
                    return;
                }
            }
            
            // Check if email already exists (excluding current user)
            for (const id in userAccounts) {
                if (id !== userId && userAccounts[id].email.toLowerCase() === email.toLowerCase()) {
                    showNotification('Email already exists. Please use a different one.');
                    return;
                }
            }
            
            // Update user account
            if (userId && userAccounts[userId]) {
                userAccounts[userId].username = username;
                userAccounts[userId].email = email;
                userAccounts[userId].pronouns = pronouns || '(pronouns/here)';
                userAccounts[userId].biography = biography;
                userAccounts[userId].aspirations = aspirations;
                
                // Save profile picture if changed
                if (tempProfilePicture) {
                    userAccounts[userId].profilePicture = tempProfilePicture;
                }
                
                // Save to localStorage
                localStorage.setItem('userAccounts', JSON.stringify(userAccounts));
                
                // Update localStorage username
                localStorage.setItem('username', username);
                
                // Update profile display
                updateProfileInfo();
                
                // Switch back to view mode
                cancelEditProfile();
                
                // Show success message
                showNotification('Profile updated successfully!');
            }
        }

        // Show home page
        function showHomePage(event) {
            if (event) {
                event.preventDefault();
            }
            
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show home page
            document.getElementById('homePage').classList.add('active');
            
            // Update navigation
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('nav-active');
            });
            document.querySelector('.nav-link').classList.add('nav-active');
        }

        // Show public posts page
        function showPublicPostsPage(event) {
            if (event) {
                event.preventDefault();
            }
            
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show public posts page
            document.getElementById('publicPostsPage').classList.add('active');
            
            // Load public posts
            loadPublicPosts();
        }

        // Load public posts
        function loadPublicPosts() {
            const publicPostsList = document.getElementById('publicPostsList');
            const posts = JSON.parse(localStorage.getItem('postsData')) || [];
            
            // Filter only public posts
            const publicPosts = posts.filter(post => post.public === true);
            
            if (publicPosts.length === 0) {
                publicPostsList.innerHTML = '<p>No public posts available.</p>';
                return;
            }
            
            let html = '';
            
            publicPosts.forEach(post => {
                const author = userAccounts[post.authorId];
                const authorUsername = author ? author.username : 'Unknown';
                const authorPfp = author && author.profilePicture ? author.profilePicture : 'https://z-cdn-media.chatglm.cn/files/958d52f5-1e66-4d41-adaa-8fae417937e6_octupus%20logo.png?auth_key=1793282742-e95e96f3c2434de38fe756e55c0425ca-0-98a496c4a876d4e28fdc80a9a2d5e15a';
                
                html += `
                    <div class="public-post-item">
                        <div class="public-post-header">
                            <img src="${authorPfp}" alt="${authorUsername}" class="public-post-avatar">
                            <div class="public-post-info">
                                <div class="public-post-username" onclick="viewUserProfile('${post.authorId}')">${authorUsername}</div>
                                <div class="public-post-date">${post.date}</div>
                            </div>
                        </div>
                        <div class="public-post-title">${post.title}</div>
                        <div class="public-post-content">${post.content}</div>
                        <div class="public-post-actions">
                            <span class="public-post-action">Like</span>
                            <span class="public-post-action">Comment (${post.comments})</span>
                            <span class="public-post-action">Share</span>
                        </div>
                    </div>
                `;
            });
            
            publicPostsList.innerHTML = html;
        }

        // Load user posts
        function loadUserPosts() {
            const userId = localStorage.getItem('userId');
            const userPostsList = document.getElementById('userPostsList');
            
            if (!userId) {
                return;
            }
            
            const posts = JSON.parse(localStorage.getItem('postsData')) || [];
            
            // Filter posts by current user
            const userPosts = posts.filter(post => post.authorId === userId);
            
            if (userPosts.length === 0) {
                userPostsList.innerHTML = '<p>You haven\'t created any posts yet.</p>';
                return;
            }
            
            let html = '';
            
            userPosts.forEach(post => {
                html += `
                    <div class="post-preview">
                        <div class="post-title">${post.title}</div>
                        <div class="post-meta">${post.content}</div>
                        <div class="post-actions">
                            <button class="standard-btn">Edit</button>
                            <div class="flex items-center">
                                <span class="mr-2">Language:</span>
                                <select class="border border-gray-300 rounded px-2 py-1">
                                    <option>${post.language}</option>
                                </select>
                            </div>
                            <div>Comments: ${post.comments}</div>
                        </div>
                    </div>
                `;
            });
            
            userPostsList.innerHTML = html;
        }

        // Load discussion messages
        function loadDiscussionMessages() {
            const discussionMessagesContainer = document.getElementById('discussionMessages');
            const messages = JSON.parse(localStorage.getItem('discussionMessages')) || [];
            
            if (messages.length === 0) {
                discussionMessagesContainer.innerHTML = '<p>No discussion messages available.</p>';
                return;
            }
            
            let html = '';
            
            messages.forEach(message => {
                html += `
                    <div class="conversation-item">
                        <div class="conversation-username">${message.author}</div>
                        <div class="conversation-content">${message.content}</div>
                        <div class="conversation-meta">${message.date} • ${message.replies} replies</div>
                    </div>
                `;
            });
            
            discussionMessagesContainer.innerHTML = html;
        }

        // Post discussion message
        function postDiscussionMessage() {
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            
            if (!isLoggedIn) {
                showNotification('Please log in to post a message.');
                return;
            }
            
            const messageContent = document.getElementById('postMessage').value.trim();
            
            if (!messageContent) {
                showNotification('Please enter a message.');
                return;
            }
            
            const userId = localStorage.getItem('userId');
            const username = localStorage.getItem('username');
            
            // Create new message
            const newMessage = {
                id: 'disc_' + Date.now(),
                author: username,
                authorId: userId,
                content: messageContent,
                date: new Date().toISOString().split('T')[0],
                replies: 0
            };
            
            // Add to discussion messages
            discussionMessages.push(newMessage);
            
            // Save to localStorage
            localStorage.setItem('discussionMessages', JSON.stringify(discussionMessages));
            
            // Clear input
            document.getElementById('postMessage').value = '';
            
            // Reload messages
            loadDiscussionMessages();
            
            showNotification('Message posted successfully!');
        }

        // Publish post
        function publishPost() {
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            
            if (!isLoggedIn) {
                showNotification('Please log in to publish a post.');
                return;
            }
            
            const title = document.getElementById('postTitle').value.trim();
            const category = document.getElementById('postCategory').value;
            const content = document.getElementById('postContent').value.trim();
            const tags = document.getElementById('postTags').value.trim();
            const isPublic = document.getElementById('postPublic').checked;
            
            if (!title) {
                showNotification('Please enter a title for your post.');
                return;
            }
            
            if (!category) {
                showNotification('Please select a category for your post.');
                return;
            }
            
            if (!content) {
                showNotification('Please enter content for your post.');
                return;
            }
            
            const userId = localStorage.getItem('userId');
            const username = localStorage.getItem('username');
            
            // Create new post
            const newPost = {
                id: 'post_' + Date.now(),
                title: title,
                content: content,
                author: username,
                authorId: userId,
                date: new Date().toISOString().split('T')[0],
                type: category,
                language: 'English',
                comments: 0,
                public: isPublic,
                tags: tags ? tags.split(',').map(tag => tag.trim()) : []
            };
            
            // Add to posts data
            postsData.push(newPost);
            
            // Save to localStorage
            localStorage.setItem('postsData', JSON.stringify(postsData));
            
            // Clear form
            document.getElementById('postTitle').value = '';
            document.getElementById('postCategory').value = '';
            document.getElementById('postContent').value = '';
            document.getElementById('postTags').value = '';
            document.getElementById('postPublic').checked = true;
            
            // Show success message
            showNotification('Post published successfully!');
            
            // Navigate to profile posts section
            showProfilePage();
            showProfileSection('posts');
            loadUserPosts();
        }

        // Save draft
        function saveDraft() {
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            
            if (!isLoggedIn) {
                showNotification('Please log in to save a draft.');
                return;
            }
            
            const title = document.getElementById('postTitle').value.trim();
            const category = document.getElementById('postCategory').value;
            const content = document.getElementById('postContent').value.trim();
            const tags = document.getElementById('postTags').value.trim();
            
            if (!title && !content) {
                showNotification('Please enter a title or content to save as draft.');
                return;
            }
            
            // Get existing drafts
            let drafts = JSON.parse(localStorage.getItem('drafts')) || [];
            
            // Create new draft
            const newDraft = {
                id: 'draft_' + Date.now(),
                title: title || 'Untitled',
                content: content,
                category: category,
                tags: tags ? tags.split(',').map(tag => tag.trim()) : [],
                date: new Date().toISOString().split('T')[0]
            };
            
            // Add to drafts
            drafts.push(newDraft);
            
            // Save to localStorage
            localStorage.setItem('drafts', JSON.stringify(drafts));
            
            // Show success message
            showNotification('Draft saved successfully!');
        }

        // View user profile
        function viewUserProfile(userId) {
            // Check if user is logged in
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            
            if (!isLoggedIn) {
                // Show auth modal
                document.getElementById('authModal').style.display = 'flex';
                return;
            }
            
            // Don't allow viewing own profile this way
            const currentUserId = localStorage.getItem('userId');
            if (userId === currentUserId) {
                showProfilePage();
                return;
            }
            
            // Set current viewing user ID
            currentViewingUserId = userId;
            
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show other user profile page
            document.getElementById('otherUserProfilePage').classList.add('active');
            
            // Update other user profile information
            updateOtherUserProfile(userId);
            
            // Load user posts
            loadUserPosts(userId);
        }

        // Update other user profile information
        function updateOtherUserProfile(userId) {
            const user = userAccounts[userId];
            
            if (!user) {
                return;
            }
            
            // Update profile display
            document.getElementById('otherProfileUsername').textContent = user.username || 'Unknown';
            document.getElementById('otherProfilePronouns').textContent = user.pronouns || '(pronouns/here)';
            document.getElementById('otherProfileBiography').textContent = user.biography || 'No biography available.';
            document.getElementById('otherProfileAspirations').textContent = user.aspirations || 'No aspirations specified.';
            
            // Update profile picture if available
            if (user.profilePicture) {
                document.getElementById('otherProfilePictureDisplay').src = user.profilePicture;
            } else {
                document.getElementById('otherProfilePictureDisplay').src = 'https://z-cdn-media.chatglm.cn/files/958d52f5-1e66-4d41-adaa-8fae417937e6_octupus%20logo.png?auth_key=1793282742-e95e96f3c2434de38fe756e55c0425ca-0-98a496c4a876d4e28fdc80a9a2d5e15a';
            }
            
            // Update follow button
            updateFollowButton(userId);
        }

        // Update follow button
        function updateFollowButton(userId) {
            const currentUserId = localStorage.getItem('userId');
            const followButton = document.getElementById('followButton');
            
            if (!currentUserId) {
                followButton.style.display = 'none';
                return;
            }
            
            // Check if current user is following this user
            if (following[currentUserId] && following[currentUserId].includes(userId)) {
                // User is following, show Message button
                followButton.textContent = 'Message';
                followButton.onclick = function() { openChat(userId); };
            } else {
                // User is not following, check if there's a pending request
                if (followRequests[userId] && followRequests[userId].includes(currentUserId)) {
                    // Request pending, show "Request Sent" button
                    followButton.textContent = 'Request Sent';
                    followButton.onclick = function() { /* Do nothing */ };
                    followButton.disabled = true;
                } else {
                    // No request sent, show Follow button
                    followButton.textContent = 'Follow';
                    followButton.onclick = function() { sendFollowRequest(userId); };
                    followButton.disabled = false;
                }
            }
            
            followButton.style.display = 'block';
        }

        // Send follow request
        function sendFollowRequest(userId) {
            const currentUserId = localStorage.getItem('userId');
            
            if (!currentUserId) {
                showNotification('Please log in to follow users.');
                return;
            }
            
            // Add to follow requests
            if (!followRequests[userId]) {
                followRequests[userId] = [];
            }
            
            if (!followRequests[userId].includes(currentUserId)) {
                followRequests[userId].push(currentUserId);
                
                // Save to localStorage
                localStorage.setItem('followRequests', JSON.stringify(followRequests));
                
                // Create notification for the user being followed
                const currentUser = userAccounts[currentUserId];
                const notification = {
                    id: generateNotificationId(),
                    type: 'follow_request',
                    fromUserId: currentUserId,
                    toUserId: userId,
                    fromUsername: currentUser.username,
                    message: `${currentUser.username} wants to follow you`,
                    timestamp: new Date().toISOString(),
                    read: false
                };
                
                notifications.push(notification);
                localStorage.setItem('notifications', JSON.stringify(notifications));
                
                // Update follow button
                updateFollowButton(userId);
                
                showNotification('Follow request sent!');
            }
        }

        // Generate notification ID
        function generateNotificationId() {
            return 'notif_' + Date.now() + '_' + Math.floor(Math.random() * 1000);
        }

        // Handle follow
        function handleFollow() {
            const followButton = document.getElementById('followButton');
            
            if (followButton.textContent === 'Follow') {
                sendFollowRequest(currentViewingUserId);
            } else if (followButton.textContent === 'Message') {
                openChat(currentViewingUserId);
            }
        }

        // Accept follow request
        function acceptFollowRequest(fromUserId, toUserId) {
            // Add to following list
            if (!following[toUserId]) {
                following[toUserId] = [];
            }
            
            if (!following[toUserId].includes(fromUserId)) {
                following[toUserId].push(fromUserId);
                
                // Save to localStorage
                localStorage.setItem('following', JSON.stringify(following));
                
                // Remove from follow requests
                if (followRequests[toUserId]) {
                    const index = followRequests[toUserId].indexOf(fromUserId);
                    if (index > -1) {
                        followRequests[toUserId].splice(index, 1);
                        localStorage.setItem('followRequests', JSON.stringify(followRequests));
                    }
                }
                
                // Create notification for the follower
                const toUser = userAccounts[toUserId];
                const notification = {
                    id: generateNotificationId(),
                    type: 'follow_accepted',
                    fromUserId: toUserId,
                    toUserId: fromUserId,
                    fromUsername: toUser.username,
                    message: `${toUser.username} accepted your follow request`,
                    timestamp: new Date().toISOString(),
                    read: false
                };
                
                notifications.push(notification);
                localStorage.setItem('notifications', JSON.stringify(notifications));
                
                // Update follow button if viewing this profile
                if (currentViewingUserId === toUserId) {
                    updateFollowButton(toUserId);
                }
                
                showNotification('Follow request accepted!');
            }
        }

        // Decline follow request
        function declineFollowRequest(fromUserId, toUserId) {
            // Remove from follow requests
            if (followRequests[toUserId]) {
                const index = followRequests[toUserId].indexOf(fromUserId);
                if (index > -1) {
                    followRequests[toUserId].splice(index, 1);
                    localStorage.setItem('followRequests', JSON.stringify(followRequests));
                }
            }
            
            // Update follow button if viewing this profile
            if (currentViewingUserId === toUserId) {
                updateFollowButton(toUserId);
            }
            
            showNotification('Follow request declined.');
        }

        // Open chat
        function openChat(userId) {
            const currentUserId = localStorage.getItem('userId');
            
            if (!currentUserId) {
                showNotification('Please log in to send messages.');
                return;
            }
            
            // Set current chat user ID
            currentChatUserId = userId;
            
            // Get user information
            const user = userAccounts[userId];
            
            if (!user) {
                showNotification('User not found.');
                return;
            }
            
            // Update chat header
            document.getElementById('chatUsername').textContent = user.username;
            
            // Initialize messages if not exists
            if (!messages[currentUserId]) {
                messages[currentUserId] = {};
            }
            
            if (!messages[currentUserId][userId]) {
                messages[currentUserId][userId] = [];
            }
            
            // Load chat messages
            loadChatMessages(currentUserId, userId);
            
            // Show chat modal
            document.getElementById('chatModal').style.display = 'flex';
        }

        // Load chat messages
        function loadChatMessages(fromUserId, toUserId) {
            const chatMessages = document.getElementById('chatMessages');
            const userMessages = messages[fromUserId][toUserId] || [];
            
            if (userMessages.length === 0) {
                chatMessages.innerHTML = '<p class="text-center text-gray-500">No messages yet. Start a conversation!</p>';
                return;
            }
            
            let html = '';
            
            userMessages.forEach(message => {
                const isSent = message.fromUserId === fromUserId;
                const messageClass = isSent ? 'sent' : 'received';
                const time = new Date(message.timestamp).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                
                html += `
                    <div class="message ${messageClass}">
                        <div class="message-bubble">${message.content}</div>
                        <div class="message-time">${time}</div>
                    </div>
                `;
            });
            
            chatMessages.innerHTML = html;
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Send message
        function sendMessage() {
            const currentUserId = localStorage.getItem('userId');
            const chatInput = document.getElementById('chatInput');
            const messageContent = chatInput.value.trim();
            
            if (!messageContent) {
                return;
            }
            
            // Create message
            const message = {
                id: generateMessageId(),
                fromUserId: currentUserId,
                toUserId: currentChatUserId,
                content: messageContent,
                timestamp: new Date().toISOString()
            };
            
            // Add to messages
            if (!messages[currentUserId]) {
                messages[currentUserId] = {};
            }
            
            if (!messages[currentUserId][currentChatUserId]) {
                messages[currentUserId][currentChatUserId] = [];
            }
            
            messages[currentUserId][currentChatUserId].push(message);
            
            // Also add to recipient's messages
            if (!messages[currentChatUserId]) {
                messages[currentChatUserId] = {};
            }
            
            if (!messages[currentChatUserId][currentUserId]) {
                messages[currentChatUserId][currentUserId] = [];
            }
            
            messages[currentChatUserId][currentUserId].push(message);
            
            // Save to localStorage
            localStorage.setItem('messages', JSON.stringify(messages));
            
            // Clear input
            chatInput.value = '';
            
            // Reload messages
            loadChatMessages(currentUserId, currentChatUserId);
            
            // Create notification for recipient if they're not in the chat
            const notification = {
                id: generateNotificationId(),
                type: 'message',
                fromUserId: currentUserId,
                toUserId: currentChatUserId,
                fromUsername: userAccounts[currentUserId].username,
                message: `New message from ${userAccounts[currentUserId].username}`,
                content: messageContent,
                timestamp: new Date().toISOString(),
                read: false
            };
            
            notifications.push(notification);
            localStorage.setItem('notifications', JSON.stringify(notifications));
        }

        // Generate message ID
        function generateMessageId() {
            return 'msg_' + Date.now() + '_' + Math.floor(Math.random() * 1000);
        }

        // Handle chat input
        function handleChatInput(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Close chat modal
        function closeChatModal() {
            document.getElementById('chatModal').style.display = 'none';
            currentChatUserId = null;
        }

        // Load user posts for profile view
        function loadUserPosts(userId) {
            const userPostsContainer = document.getElementById('otherUserPosts');
            const posts = JSON.parse(localStorage.getItem('postsData')) || [];
            
            // Filter posts by user
            const userPosts = posts.filter(post => post.authorId === userId);
            
            if (userPosts.length === 0) {
                userPostsContainer.innerHTML = '<p>No posts available.</p>';
                return;
            }
            
            let html = '';
            
            userPosts.forEach(post => {
                html += `
                    <div class="post-preview">
                        <div class="post-title">${post.title}</div>
                        <div class="post-meta">${post.content}</div>
                        <div class="post-actions">
                            <button class="standard-btn">Edit</button>
                            <div class="flex items-center">
                                <span class="mr-2">Language:</span>
                                <select class="border border-gray-300 rounded px-2 py-1">
                                    <option>${post.language}</option>
                                </select>
                            </div>
                            <div>Comments: ${post.comments}</div>
                        </div>
                    </div>
                `;
            });
            
            userPostsContainer.innerHTML = html;
        }

        // Show profile page
        function showProfilePage(event) {
            if (event) {
                event.preventDefault();
            }
            
            // Check if user is logged in
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            
            if (!isLoggedIn) {
                // Show auth modal
                document.getElementById('authModal').style.display = 'flex';
                return;
            }
            
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show profile page
            document.getElementById('profilePage').classList.add('active');
            
            // Update profile information
            updateProfileInfo();
            
            // Load messages
            loadMessages();
            
            // Load user posts
            loadUserPosts();
        }

        // Load messages
        function loadMessages() {
            const currentUserId = localStorage.getItem('userId');
            const messagesList = document.getElementById('messagesList');
            
            if (!currentUserId) {
                messagesList.innerHTML = '<p>Please log in to view messages.</p>';
                return;
            }
            
            const userMessages = messages[currentUserId] || {};
            
            if (Object.keys(userMessages).length === 0) {
                messagesList.innerHTML = '<p>No messages available.</p>';
                return;
            }
            
            let html = '';
            
            // Get unique user IDs the current user has messaged with
            const uniqueUserIds = Object.keys(userMessages);
            
            uniqueUserIds.forEach(userId => {
                const user = userAccounts[userId];
                const userMessagesList = userMessages[userId] || [];
                const lastMessage = userMessagesList[userMessagesList.length - 1];
                
                if (user && lastMessage) {
                    const time = new Date(lastMessage.timestamp).toLocaleDateString();
                    const isUnread = lastMessage.fromUserId !== currentUserId && !lastMessage.read;
                    
                    html += `
                        <div class="border border-gray-200 rounded p-4 ${isUnread ? 'bg-blue-50' : ''} cursor-pointer" onclick="openChat('${userId}')">
                            <div class="flex justify-between items-center mb-2">
                                <h3 class="font-semibold">${user.username}</h3>
                                <span class="text-xs text-gray-600">${time}</span>
                            </div>
                            <p class="text-sm text-gray-600">${lastMessage.content.substring(0, 100)}${lastMessage.content.length > 100 ? '...' : ''}</p>
                        </div>
                    `;
                }
            });
            
            messagesList.innerHTML = html;
        }

        // Show conversations page
        function showConversationsPage(event) {
            if (event) {
                event.preventDefault();
            }
            
            // Check if user is logged in
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            
            if (!isLoggedIn) {
                // Show auth modal
                document.getElementById('authModal').style.display = 'flex';
                return;
            }
            
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show conversations page
            document.getElementById('conversationsPage').classList.add('active');
            
            // Load discussion messages
            loadDiscussionMessages();
        }

        // Show dashboard page
        function showDashboardPage(event) {
            if (event) {
                event.preventDefault();
            }
            
            // Check if user is logged in
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            
            if (!isLoggedIn) {
                // Show auth modal
                document.getElementById('authModal').style.display = 'flex';
                return;
            }
            
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show dashboard page
            document.getElementById('dashboardPage').classList.add('active');
            
            // Load user posts
            loadUserPosts();
        }

        // Show settings page
        function showSettingsPage(event) {
            if (event) {
                event.preventDefault();
            }
            
            // Check if user is logged in
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            
            if (!isLoggedIn) {
                // Show auth modal
                document.getElementById('authModal').style.display = 'flex';
                return;
            }
            
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show settings page
            document.getElementById('settingsPage').classList.add('active');
        }

        // Show certificates page
        function showCertificatesPage(event) {
            if (event) {
                event.preventDefault();
            }
            
            // Check if user is logged in
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            
            if (!isLoggedIn) {
                // Show auth modal
                document.getElementById('authModal').style.display = 'flex';
                return;
            }
            
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show certificates page
            document.getElementById('certificatesPage').classList.add('active');
        }

        // Show achievements page
        function showAchievementsPage(event) {
            if (event) {
                event.preventDefault();
            }
            
            // Check if user is logged in
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            
            if (!isLoggedIn) {
                // Show auth modal
                document.getElementById('authModal').style.display = 'flex';
                return;
            }
            
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show achievements page
            document.getElementById('achievementsPage').classList.add('active');
        }

        // Show history page
        function showHistoryPage(event) {
            if (event) {
                event.preventDefault();
            }
            
            // Check if user is logged in
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            
            if (!isLoggedIn) {
                // Show auth modal
                document.getElementById('authModal').style.display = 'flex';
                return;
            }
            
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show history page
            document.getElementById('historyPage').classList.add('active');
        }

        // Show post page
        function showPostPage(event) {
            if (event) {
                event.preventDefault();
            }
            
            // Check if user is logged in
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            
            if (!isLoggedIn) {
                // Show auth modal
                document.getElementById('authModal').style.display = 'flex';
                return;
            }
            
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show post page
            document.getElementById('postPage').classList.add('active');
        }

        // Show blogs page
        function showBlogsPage(event) {
            if (event) {
                event.preventDefault();
            }
            
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show blogs page
            document.getElementById('blogsPage').classList.add('active');
            
            // Load blogs
            loadBlogs();
        }

        // Load blogs
        function loadBlogs() {
            const blogsList = document.getElementById('blogsList');
            const posts = JSON.parse(localStorage.getItem('postsData')) || [];
            
            // Filter only blog posts
            const blogPosts = posts.filter(post => post.type === 'blog');
            
            if (blogPosts.length === 0) {
                blogsList.innerHTML = '<p>No blog posts available.</p>';
                return;
            }
            
            let html = '';
            
            blogPosts.forEach(post => {
                const author = userAccounts[post.authorId];
                const authorUsername = author ? author.username : 'Unknown';
                
                html += `
                    <div class="border border-gray-200 rounded p-4 mb-4">
                        <h3 class="font-semibold mb-2">${post.title}</h3>
                        <p class="text-sm text-gray-600 mb-2">By ${authorUsername} • ${post.date}</p>
                        <p class="mb-2">${post.content}</p>
                        <div class="flex justify-between items-center">
                            <div class="text-sm text-gray-600">Comments: ${post.comments}</div>
                            <a href="#" class="text-blue-600 hover:underline text-sm">Read More</a>
                        </div>
                    </div>
                `;
            });
            
            blogsList.innerHTML = html;
        }

        // Show index page
        function showIndexPage(event) {
            if (event) {
                event.preventDefault();
            }
            
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show index page
            document.getElementById('indexPage').classList.add('active');
        }

        // Show clusters page
        function showClustersPage(event) {
            if (event) {
                event.preventDefault();
            }
            
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show clusters page
            document.getElementById('clustersPage').classList.add('active');
        }

        // Show vision page
        function showVisionPage(event) {
            if (event) {
                event.preventDefault();
            }
            
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show vision page
            document.getElementById('visionPage').classList.add('active');
        }

        // Show contact page
        function showContactPage(event) {
            if (event) {
                event.preventDefault();
            }
            
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show contact page
            document.getElementById('contactPage').classList.add('active');
        }

        // Show FAQ page
        function showFAQPage(event) {
            if (event) {
                event.preventDefault();
            }
            
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show FAQ page
            document.getElementById('faqPage').classList.add('active');
        }

        // Show volunteer page
        function showVolunteerPage(event) {
            if (event) {
                event.preventDefault();
            }
            
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show volunteer page
            document.getElementById('volunteerPage').classList.add('active');
        }

        // Submit contact form
        function submitContactForm() {
            const name = document.getElementById('contactName').value.trim();
            const email = document.getElementById('contactEmail').value.trim();
            const message = document.getElementById('contactMessage').value.trim();
            
            if (!name || !email || !message) {
                showNotification('Please fill in all fields.');
                return;
            }
            
            // Validate email format
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                showNotification('Please enter a valid email address.');
                return;
            }
            
            // Clear form
            document.getElementById('contactName').value = '';
            document.getElementById('contactEmail').value = '';
            document.getElementById('contactMessage').value = '';
            
            // Show success message
            showNotification('Your message has been sent successfully!');
        }

        // Submit volunteer form
        function submitVolunteerForm() {
            const name = document.getElementById('volunteerName').value.trim();
            const email = document.getElementById('volunteerEmail').value.trim();
            const role = document.getElementById('volunteerRole').value;
            const experience = document.getElementById('volunteerExperience').value.trim();
            
            if (!name || !email || !role || !experience) {
                showNotification('Please fill in all fields.');
                return;
            }
            
            // Validate email format
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                showNotification('Please enter a valid email address.');
                return;
            }
            
            // Clear form
            document.getElementById('volunteerName').value = '';
            document.getElementById('volunteerEmail').value = '';
            document.getElementById('volunteerRole').value = '';
            document.getElementById('volunteerExperience').value = '';
            
            // Show success message
            showNotification('Your volunteer application has been submitted successfully!');
        }

        // Show profile section
        function showProfileSection(section) {
            // Hide all sections
            document.querySelectorAll('.profile-section').forEach(sec => {
                sec.style.display = 'none';
            });
            
            // Show selected section
            document.getElementById(section + 'Section').style.display = 'block';
            
            // Update sidebar
            document.querySelectorAll('.profile-sidebar-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Load specific data for sections
            if (section === 'posts') {
                loadUserPosts();
            } else if (section === 'messages') {
                loadMessages();
            }
        }

        // Show other profile section
        function showOtherProfileSection(section) {
            // Hide all sections
            document.querySelectorAll('.profile-section').forEach(sec => {
                sec.style.display = 'none';
            });
            
            // Show selected section
            document.getElementById('other' + section.charAt(0).toUpperCase() + section.slice(1) + 'Section').style.display = 'block';
            
            // Update sidebar
            document.querySelectorAll('.profile-sidebar-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // Close auth modal
        function closeAuthModal() {
            document.getElementById('authModal').style.display = 'none';
            clearErrors();
        }

        // Switch between login and register tabs
        function switchTab(tab) {
            // Update tab styling
            document.getElementById('loginTab').classList.remove('active');
            document.getElementById('registerTab').classList.remove('active');
            document.getElementById('loginContent').classList.remove('active');
            document.getElementById('registerContent').classList.remove('active');
            
            if (tab === 'login') {
                document.getElementById('loginTab').classList.add('active');
                document.getElementById('loginContent').classList.add('active');
            } else {
                document.getElementById('registerTab').classList.add('active');
                document.getElementById('registerContent').classList.add('active');
            }
            
            clearErrors();
        }

        // Clear error messages
        function clearErrors() {
            document.getElementById('loginError').textContent = '';
            document.getElementById('registerError').textContent = '';
        }

        // Validate password strength
        function validatePassword(password) {
            // At least 8 characters, with uppercase, lowercase, and numbers
            const regex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/;
            return regex.test(password);
        }

        // Validate email format
        function validateEmail(email) {
            const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return regex.test(email);
        }

        // Check if email is a Gmail address
        function isEmailApproved(email) {
            // Convert to lowercase for case-insensitive comparison
            const emailLower = email.toLowerCase();
            // Check if email ends with @gmail.com
            return emailLower.endsWith('@gmail.com');
        }

        // Check if email is already registered
        function isEmailAlreadyRegistered(email) {
            for (const userId in userAccounts) {
                if (userAccounts[userId].email.toLowerCase() === email.toLowerCase()) {
                    return true;
                }
            }
            return false;
        }

        // Perform registration
        function performRegister() {
            const username = document.getElementById('registerUsername').value.trim();
            const email = document.getElementById('registerEmail').value.trim();
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const errorElement = document.getElementById('registerError');
            
            // Clear previous errors
            errorElement.textContent = '';
            
            // Validate inputs
            if (!username) {
                errorElement.textContent = 'Please enter a username.';
                return;
            }
            
            if (!email) {
                errorElement.textContent = 'Please enter an email address.';
                return;
            }
            
            if (!validateEmail(email)) {
                errorElement.textContent = 'Please enter a valid email address.';
                return;
            }
            
            // Check if email is a Gmail address
            if (!isEmailApproved(email)) {
                errorElement.textContent = 'Only Gmail email addresses are approved for registration. Please use a Gmail address.';
                return;
            }
            
            // Check if email is already registered
            if (isEmailAlreadyRegistered(email)) {
                errorElement.textContent = 'This Gmail address has already been used to register an account. Please use a different Gmail address or try logging in.';
                return;
            }
            
            if (!password) {
                errorElement.textContent = 'Please enter a password.';
                return;
            }
            
            if (!validatePassword(password)) {
                errorElement.textContent = 'Password must be at least 8 characters with uppercase, lowercase, and numbers.';
                return;
            }
            
            if (password !== confirmPassword) {
                errorElement.textContent = 'Passwords do not match.';
                return;
            }
            
            // Check if username already exists
            for (const userId in userAccounts) {
                if (userAccounts[userId].username === username) {
                    errorElement.textContent = 'Username already exists. Please choose a different one.';
                    return;
                }
            }
            
            // Generate unique user ID
            const userId = generateUserId();
            
            // Create new account
            userAccounts[userId] = {
                username: username,
                email: email,
                password: password, // In a real app, this would be hashed
                pronouns: '(pronouns/here)', // Default pronouns
                biography: 'This is where you can write about yourself, your interests, and what makes you unique. Share your story with the community!',
                aspirations: 'My aspirations for this community include sharing knowledge, learning from others, and contributing to meaningful discussions that benefit everyone.',
                createdAt: new Date().toISOString()
            };
            
            // Save to localStorage
            localStorage.setItem('userAccounts', JSON.stringify(userAccounts));
            
            // Show success message
            showNotification('Account created successfully! You can now log in.');
            
            // Switch to login tab
            switchTab('login');
            
            // Pre-fill login form with username
            document.getElementById('loginUsername').value = username;
        }

        // Perform login
        function performLogin() {
            const loginInput = document.getElementById('loginUsername').value.trim();
            const password = document.getElementById('loginPassword').value;
            const errorElement = document.getElementById('loginError');
            
            // Clear previous errors
            errorElement.textContent = '';
            
            // Validate inputs
            if (!loginInput) {
                errorElement.textContent = 'Please enter your username or email.';
                return;
            }
            
            if (!password) {
                errorElement.textContent = 'Please enter your password.';
                return;
            }
            
            // Find user account
            let foundAccount = null;
            let userId = null;
            
            for (const id in userAccounts) {
                const account = userAccounts[id];
                if (account.username === loginInput || account.email.toLowerCase() === loginInput.toLowerCase()) {
                    foundAccount = account;
                    userId = id;
                    break;
                }
            }
            
            // Check if account exists and password matches
            if (!foundAccount) {
                errorElement.textContent = 'Invalid username/email or password.';
                return;
            }
            
            if (foundAccount.password !== password) {
                errorElement.textContent = 'Invalid username/email or password.';
                return;
            }
            
            // Login successful
            localStorage.setItem('isLoggedIn', 'true');
            localStorage.setItem('username', foundAccount.username);
            localStorage.setItem('userId', userId);
            
            // Close modal and update UI
            closeAuthModal();
            updateAuthLink();
            updateNewsSection();
            
            // Clear form
            document.getElementById('loginUsername').value = '';
            document.getElementById('loginPassword').value = '';
            
            showNotification(`Welcome back, ${foundAccount.username}!`);
        }

        // Show notification (simple implementation)
        function showNotification(message) {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-purple-700 text-white px-4 py-2 rounded shadow-lg z-50';
            notification.textContent = message;
            
            // Add to page
            document.body.appendChild(notification);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('authModal');
            if (event.target === modal) {
                closeAuthModal();
            }
            
            const searchModal = document.getElementById('searchModal');
            if (event.target === searchModal) {
                closeSearchModal();
            }
            
            const notificationModal = document.getElementById('notificationModal');
            if (event.target === notificationModal) {
                closeNotificationModal();
            }
            
            const chatModal = document.getElementById('chatModal');
            if (event.target === chatModal) {
                closeChatModal();
            }
            
            const mobileMenu = document.getElementById('mobileMenu');
            if (event.target === mobileMenu) {
                mobileMenu.style.display = 'none';
            }
        }

        // Search functionality
        function openSearchModal() {
            document.getElementById('searchModal').style.display = 'flex';
            document.getElementById('searchInput').focus();
        }

        function closeSearchModal() {
            document.getElementById('searchModal').style.display = 'none';
            document.getElementById('searchInput').value = '';
            document.getElementById('searchResults').innerHTML = '';
        }

        function handleHeaderSearch(event) {
            if (event.key === 'Enter') {
                const query = event.target.value.trim();
                if (query) {
                    document.getElementById('searchInput').value = query;
                    openSearchModal();
                    performSearch();
                }
            }
        }

        function performSearch(event) {
            if (event && event.key !== 'Enter') {
                return;
            }
            
            const query = document.getElementById('searchInput').value.trim();
            const filter = document.querySelector('input[name="searchFilter"]:checked').value;
            
            if (!query) {
                document.getElementById('searchResults').innerHTML = '<p>Please enter a search query.</p>';
                return;
            }
            
            // Get data from localStorage
            const posts = JSON.parse(localStorage.getItem('postsData')) || [];
            const users = userAccounts;
            
            let results = [];
            
            // Search posts
            if (filter === 'all' || filter === 'posts') {
                posts.forEach(post => {
                    // Calculate similarity score for fuzzy matching
                    const titleScore = calculateSimilarity(query.toLowerCase(), post.title.toLowerCase());
                    const contentScore = calculateSimilarity(query.toLowerCase(), post.content.toLowerCase());
                    const authorScore = calculateSimilarity(query.toLowerCase(), post.author.toLowerCase());
                    
                    // If any part matches, include in results
                    if (titleScore > 0.3 || contentScore > 0.3 || authorScore > 0.3) {
                        results.push({
                            type: 'post',
                            title: post.title,
                            content: post.content,
                            author: post.author,
                            authorId: post.authorId,
                            date: post.date,
                            language: post.language,
                            comments: post.comments,
                            score: Math.max(titleScore, contentScore, authorScore)
                        });
                    }
                });
            }
            
            // Search users
            if (filter === 'all' || filter === 'users') {
                for (const userId in users) {
                    const user = users[userId];
                    const usernameScore = calculateSimilarity(query.toLowerCase(), user.username.toLowerCase());
                    const bioScore = calculateSimilarity(query.toLowerCase(), user.biography.toLowerCase());
                    
                    // If any part matches, include in results
                    if (usernameScore > 0.3 || bioScore > 0.3) {
                        results.push({
                            type: 'user',
                            title: user.username,
                            content: user.biography,
                            author: user.username,
                            authorId: userId,
                            date: user.createdAt,
                            pronouns: user.pronouns,
                            score: Math.max(usernameScore, bioScore)
                        });
                    }
                }
            }
            
            // Sort results by score (highest first)
            results.sort((a, b) => b.score - a.score);
            
            // Display results
            displaySearchResults(results, query);
        }

        // Calculate similarity between two strings (simple implementation)
        function calculateSimilarity(str1, str2) {
            // If exact match, return 1
            if (str1 === str2) return 1;
            
            // If one contains the other, return 0.9
            if (str1.includes(str2) || str2.includes(str1)) return 0.9;
            
            // Calculate Levenshtein distance
            const longer = str1.length > str2.length ? str1 : str2;
            const shorter = str1.length > str2.length ? str2 : str1;
            
            if (longer.length === 0) return 1.0;
            
            const distance = levenshteinDistance(longer, shorter);
            return (longer.length - distance) / longer.length;
        }

        // Calculate Levenshtein distance between two strings
        function levenshteinDistance(str1, str2) {
            const matrix = [];
            
            for (let i = 0; i <= str2.length; i++) {
                matrix[i] = [i];
            }
            
            for (let j = 0; j <= str1.length; j++) {
                matrix[0][j] = j;
            }
            
            for (let i = 1; i <= str2.length; i++) {
                for (let j = 1; j <= str1.length; j++) {
                    if (str2.charAt(i - 1) === str1.charAt(j - 1)) {
                        matrix[i][j] = matrix[i - 1][j - 1];
                    } else {
                        matrix[i][j] = Math.min(
                            matrix[i - 1][j - 1] + 1,
                            matrix[i][j - 1] + 1,
                            matrix[i - 1][j] + 1
                        );
                    }
                }
            }
            
            return matrix[str2.length][str1.length];
        }

        function displaySearchResults(results, query) {
            const resultsContainer = document.getElementById('searchResults');
            
            if (results.length === 0) {
                resultsContainer.innerHTML = `<p>No results found for "${query}".</p>`;
                return;
            }
            
            let html = `<h3>Search Results for "${query}" (${results.length} found)</h3>`;
            
            results.forEach(result => {
                const typeLabel = result.type === 'post' ? 'Post' : 'User';
                const typeClass = result.type === 'post' ? 'text-blue-600' : 'text-green-600';
                
                html += `
                    <div class="search-result-item" onclick="viewSearchResult('${result.type}', '${result.authorId}')">
                        <div class="search-result-title">${result.title}</div>
                        <div class="search-result-type ${typeClass}">${typeLabel}</div>
                        <div class="search-result-content">${result.content.substring(0, 150)}${result.content.length > 150 ? '...' : ''}</div>
                        <div class="search-result-meta">
                            ${result.type === 'post' ? 
                                `By ${result.author} • ${result.date} • ${result.language} • ${result.comments} comments` : 
                                `User since ${new Date(result.date).toLocaleDateString()} • ${result.pronouns}`
                            }
                        </div>
                    </div>
                `;
            });
            
            resultsContainer.innerHTML = html;
        }

        function viewSearchResult(type, authorId) {
            if (type === 'user') {
                viewUserProfile(authorId);
                closeSearchModal();
            } else if (type === 'post') {
                // In a real application, this would navigate to the post detail page
                showNotification('Viewing post details');
                closeSearchModal();
            }
        }

        // Notification functionality
        function openNotificationModal() {
            document.getElementById('notificationModal').style.display = 'flex';
            loadNotifications();
        }

        function closeNotificationModal() {
            document.getElementById('notificationModal').style.display = 'none';
        }

        function loadNotifications() {
            const currentUserId = localStorage.getItem('userId');
            const notificationList = document.getElementById('notificationList');
            
            if (!currentUserId) {
                notificationList.innerHTML = '<p>Please log in to view notifications.</p>';
                return;
            }
            
            // Filter notifications for current user
            const userNotifications = notifications.filter(notif => notif.toUserId === currentUserId);
            
            if (userNotifications.length === 0) {
                notificationList.innerHTML = '<p>No notifications available.</p>';
                return;
            }
            
            let html = '';
            
            userNotifications.forEach(notification => {
                const isRead = notification.read;
                const time = new Date(notification.timestamp).toLocaleDateString();
                
                html += `
                    <div class="notification-item ${!isRead ? 'unread' : ''}">
                        <div class="notification-text">${notification.message}</div>
                        <div class="notification-time">${time}</div>
                        <div class="notification-actions">
                            ${notification.type === 'follow_request' ? 
                                `<button class="standard-btn" onclick="acceptFollowRequest('${notification.fromUserId}', '${notification.toUserId}')">Accept</button>
                                <button class="standard-btn" style="background-color: #ccc; color: #333;" onclick="declineFollowRequest('${notification.fromUserId}', '${notification.toUserId}')">Decline</button>` : 
                                `<button class="standard-btn" onclick="markNotificationAsRead('${notification.id}')">Mark as Read</button>`
                            }
                        </div>
                    </div>
                `;
            });
            
            notificationList.innerHTML = html;
            
            // Mark all notifications as read
            userNotifications.forEach(notification => {
                notification.read = true;
            });
            
            localStorage.setItem('notifications', JSON.stringify(notifications));
            updateNotifications();
        }

        function markNotificationAsRead(notificationId) {
            const notification = notifications.find(n => n.id === notificationId);
            if (notification) {
                notification.read = true;
                localStorage.setItem('notifications', JSON.stringify(notifications));
                loadNotifications();
            }
        }

        function updateNotifications() {
            const currentUserId = localStorage.getItem('userId');
            
            if (!currentUserId) {
                document.getElementById('notificationBadge').style.display = 'none';
                return;
            }
            
            // Count unread notifications
            const unreadCount = notifications.filter(notif => 
                notif.toUserId === currentUserId && !notif.read
            ).length;
            
            if (unreadCount > 0) {
                document.getElementById('notificationBadge').textContent = unreadCount;
                document.getElementById('notificationBadge').style.display = 'flex';
            } else {
                document.getElementById('notificationBadge').style.display = 'none';
            }
        }

        // Listen for window resize to adjust mobile menu
        window.addEventListener('resize', function() {
            checkMobileMenu();
        });
    </script>
</body>
</html>
